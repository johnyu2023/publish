<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>AI辅助编程03-AI时代编程的尽头是软件工程，印度人也是怎么想的吗？真是的 | AI时代的技术分享</title>
    <meta name="description" content="AI辅助编程存在多轮对话可靠性下降、随机性错误等问题，需频繁Git提交备份。作者对比多种AI工具，强调提示词重要性，分享Vue项目中AI修改导致问题的案例，指出AI在复杂项目中易失控，需人类掌控方向。">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/publish/assets/style.DRBLaDk2.css" as="style">
    <link rel="preload stylesheet" href="/publish/vp-icons.css" as="style">
    
    <script type="module" src="/publish/assets/app.BGfesKEW.js"></script>
    <link rel="preload" href="/publish/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/publish/assets/chunks/theme.bX1Eo20O.js">
    <link rel="modulepreload" href="/publish/assets/chunks/framework.6sy4tsQT.js">
    <link rel="modulepreload" href="/publish/assets/think_ai-coding-03.md.8x8wYpmn.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-1a5fa121 data-v-517c61da><!--[--><!--]--><!--[--><span tabindex="-1" data-v-85631d8a></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-85631d8a>Skip to content</a><!--]--><!----><header class="VPNav" data-v-517c61da data-v-ad0ff04f><div class="VPNavBar" data-v-ad0ff04f data-v-c4b448a0><div class="wrapper" data-v-c4b448a0><div class="container" data-v-c4b448a0><div class="title" data-v-c4b448a0><div class="VPNavBarTitle has-sidebar" data-v-c4b448a0 data-v-17e8441d><a class="title" href="/publish/" data-v-17e8441d><!--[--><!--]--><!----><span data-v-17e8441d>AI时代的技术分享</span><!--[--><!--]--></a></div></div><div class="content" data-v-c4b448a0><div class="content-body" data-v-c4b448a0><!--[--><!--]--><div class="VPNavBarSearch search" data-v-c4b448a0><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-c4b448a0 data-v-47ed3af6><span id="main-nav-aria-label" class="visually-hidden" data-v-47ed3af6> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/publish/" tabindex="0" data-v-47ed3af6 data-v-3b4bacd7><!--[--><span data-v-3b4bacd7>首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/publish/search.html" tabindex="0" data-v-47ed3af6 data-v-3b4bacd7><!--[--><span data-v-3b4bacd7>搜索</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/publish/ai/future-of-ai.html" tabindex="0" data-v-47ed3af6 data-v-3b4bacd7><!--[--><span data-v-3b4bacd7>人工智能</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/publish/foundation/data-structure.html" tabindex="0" data-v-47ed3af6 data-v-3b4bacd7><!--[--><span data-v-3b4bacd7>基础知识</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/publish/fullstack/ci-cd.html" tabindex="0" data-v-47ed3af6 data-v-3b4bacd7><!--[--><span data-v-3b4bacd7>全栈开发</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/publish/think/ai-coding-03.html" tabindex="0" data-v-47ed3af6 data-v-3b4bacd7><!--[--><span data-v-3b4bacd7>观察思考</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/publish/system/history.html" tabindex="0" data-v-47ed3af6 data-v-3b4bacd7><!--[--><span data-v-3b4bacd7>关于</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-c4b448a0 data-v-551c6ba3><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-551c6ba3 data-v-03690ab6 data-v-8f478355><span class="check" data-v-8f478355><span class="icon" data-v-8f478355><!--[--><span class="vpi-sun sun" data-v-03690ab6></span><span class="vpi-moon moon" data-v-03690ab6></span><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-c4b448a0 data-v-f453e488 data-v-1e393896><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-1e393896><span class="vpi-more-horizontal icon" data-v-1e393896></span></button><div class="menu" data-v-1e393896><div class="VPMenu" data-v-1e393896 data-v-c361097d><!----><!--[--><!--[--><!----><div class="group" data-v-f453e488><div class="item appearance" data-v-f453e488><p class="label" data-v-f453e488>Appearance</p><div class="appearance-action" data-v-f453e488><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f453e488 data-v-03690ab6 data-v-8f478355><span class="check" data-v-8f478355><span class="icon" data-v-8f478355><!--[--><span class="vpi-sun sun" data-v-03690ab6></span><span class="vpi-moon moon" data-v-03690ab6></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-c4b448a0 data-v-7952c90f><span class="container" data-v-7952c90f><span class="top" data-v-7952c90f></span><span class="middle" data-v-7952c90f></span><span class="bottom" data-v-7952c90f></span></span></button></div></div></div></div><div class="divider" data-v-c4b448a0><div class="divider-line" data-v-c4b448a0></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-517c61da data-v-e38b721e><div class="container" data-v-e38b721e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-e38b721e><span class="vpi-align-left menu-icon" data-v-e38b721e></span><span class="menu-text" data-v-e38b721e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-e38b721e data-v-288722a6><button data-v-288722a6>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-517c61da data-v-9a15451a><div class="curtain" data-v-9a15451a></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-9a15451a><span class="visually-hidden" id="sidebar-aria-label" data-v-9a15451a> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-8dea7b39><section class="VPSidebarItem level-0 has-active" data-v-8dea7b39 data-v-882d9cec><div class="item" role="button" tabindex="0" data-v-882d9cec><div class="indicator" data-v-882d9cec></div><h2 class="text" data-v-882d9cec>观察思考</h2><!----></div><div class="items" data-v-882d9cec><!--[--><div class="VPSidebarItem level-1 is-link" data-v-882d9cec data-v-882d9cec><div class="item" data-v-882d9cec><div class="indicator" data-v-882d9cec></div><a class="VPLink link link" href="/publish/think/ai-coding-03.html" data-v-882d9cec><!--[--><p class="text" data-v-882d9cec>AI辅助编程03-AI时代编程的尽头是软件工程，印度人也是怎么想的吗？真是的</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-882d9cec data-v-882d9cec><div class="item" data-v-882d9cec><div class="indicator" data-v-882d9cec></div><a class="VPLink link link" href="/publish/think/full-stack-engineer.html" data-v-882d9cec><!--[--><p class="text" data-v-882d9cec>AI时代的全栈工程师</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-882d9cec data-v-882d9cec><div class="item" data-v-882d9cec><div class="indicator" data-v-882d9cec></div><a class="VPLink link link" href="/publish/think/business-value-of-ai-agents.html" data-v-882d9cec><!--[--><p class="text" data-v-882d9cec>AI Agents 的商业价值</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-882d9cec data-v-882d9cec><div class="item" data-v-882d9cec><div class="indicator" data-v-882d9cec></div><a class="VPLink link link" href="/publish/think/junior.html" data-v-882d9cec><!--[--><p class="text" data-v-882d9cec>AI时代初级岗位是否存在</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-882d9cec data-v-882d9cec><div class="item" data-v-882d9cec><div class="indicator" data-v-882d9cec></div><a class="VPLink link link" href="/publish/think/ai-benefits-4-pm.html" data-v-882d9cec><!--[--><p class="text" data-v-882d9cec>AI 给产品经理带来的帮助</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-882d9cec data-v-882d9cec><div class="item" data-v-882d9cec><div class="indicator" data-v-882d9cec></div><a class="VPLink link link" href="/publish/think/pm.html" data-v-882d9cec><!--[--><p class="text" data-v-882d9cec>AI草莽时代的产品经理肖像分析</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-882d9cec data-v-882d9cec><div class="item" data-v-882d9cec><div class="indicator" data-v-882d9cec></div><a class="VPLink link link" href="/publish/think/ai-coding-02.html" data-v-882d9cec><!--[--><p class="text" data-v-882d9cec>AI辅助编程02-注意事项</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-882d9cec data-v-882d9cec><div class="item" data-v-882d9cec><div class="indicator" data-v-882d9cec></div><a class="VPLink link link" href="/publish/think/ai-coding-01.html" data-v-882d9cec><!--[--><p class="text" data-v-882d9cec>AI辅助编程01-初体验</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-517c61da data-v-7e7d4951><div class="VPDoc has-sidebar has-aside" data-v-7e7d4951 data-v-0071ecf2><!--[--><!--]--><div class="container" data-v-0071ecf2><div class="aside" data-v-0071ecf2><div class="aside-curtain" data-v-0071ecf2></div><div class="aside-container" data-v-0071ecf2><div class="aside-content" data-v-0071ecf2><div class="VPDocAside" data-v-0071ecf2 data-v-e1fe3afb><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-e1fe3afb data-v-50537eb5><div class="content" data-v-50537eb5><div class="outline-marker" data-v-50537eb5></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-50537eb5>On this page</div><ul class="VPDocOutlineItem root" data-v-50537eb5 data-v-17ded436><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-e1fe3afb></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-0071ecf2><div class="content-container" data-v-0071ecf2><!--[--><!--[--><!--[--><div class="frontmatter-meta" data-v-1a5fa121><div class="meta-item" data-v-1a5fa121><strong data-v-1a5fa121>标题：</strong><span data-v-1a5fa121>AI辅助编程03-AI时代编程的尽头是软件工程，印度人也是怎么想的吗？真是的</span></div><div class="meta-item" data-v-1a5fa121><strong data-v-1a5fa121>描述：</strong><span data-v-1a5fa121>AI辅助编程存在多轮对话可靠性下降、随机性错误等问题，需频繁Git提交备份。作者对比多种AI工具，强调提示词重要性，分享Vue项目中AI修改导致问题的案例，指出AI在复杂项目中易失控，需人类掌控方向。</span></div><!----><div class="meta-item" data-v-1a5fa121><strong data-v-1a5fa121>发布日期：</strong><span data-v-1a5fa121>2025/12/10</span></div><div class="meta-item" data-v-1a5fa121><strong data-v-1a5fa121>标签：</strong><div class="tags" data-v-1a5fa121><!--[--><span class="tag" data-v-1a5fa121>AI</span><span class="tag" data-v-1a5fa121>Coding</span><!--]--></div></div><!----></div><!--]--><!--]--><!--]--><main class="main" data-v-0071ecf2><div style="position:relative;" class="vp-doc _publish_think_ai-coding-03" data-v-0071ecf2><div><blockquote><p>Ai Coding 的尽头是软件工程</p></blockquote><p>对于这大半年的 AI 辅助编程，我有一些经验和教训，分享给大家。</p><h2 id="体会的经验教训" tabindex="-1">体会的经验教训 <a class="header-anchor" href="#体会的经验教训" aria-label="Permalink to &quot;体会的经验教训&quot;">​</a></h2><ul><li>单轮对话的可靠性很强，但多轮对话的可靠性会急剧下降 - 原子化任务，尽量减少上下文内容，避免多轮对话后上下文的急剧膨胀</li><li>随机性错误可能是致命的，且难以回退 - 多用 git 提交代码，回滚有着落</li><li>提示词才是最重要的资产，随时准备推倒重来 - 提示词需要保存好，特别是在越来越长的提示词大趋势下</li><li>及时备份代码，整理技术规范，这是重来的基石 - 重来不可怕，要拥抱重来，做好准备</li><li>掌控力是 AI 辅助编程的关键，膨胀失控的代码是可怕的 - 只有人类做AI的主人，才不会被牵着鼻子走</li></ul><h2 id="目前的-ai-coding-工具" tabindex="-1">目前的 AI Coding 工具 <a class="header-anchor" href="#目前的-ai-coding-工具" aria-label="Permalink to &quot;目前的 AI Coding 工具&quot;">​</a></h2><ul><li>wucai code + qwen3-coder-plus - 每天2000次免费调用，但本身有一定BUG，太复杂的问题会超时卡死 - 速度快，但有时还不如 web 版本的 Qwen 有智慧</li><li>claude + glm4.6 - 每5小时120次调用，包季 - 有时很慢，可以备用</li><li>Trae CN - 免费，主要拿来看代码，调用模型有时慢且蠢</li><li>Cursor - 太慢，弃坑</li><li>Lingma - 收费，弃坑</li><li>CodeBuddy - 收费，弃坑</li></ul><h2 id="多轮对话是最大的挑战" tabindex="-1">多轮对话是最大的挑战 <a class="header-anchor" href="#多轮对话是最大的挑战" aria-label="Permalink to &quot;多轮对话是最大的挑战&quot;">​</a></h2><ul><li>上下文中信息越来越多，过多的信息反而会分散 AI 的注意力</li><li>每轮对话都有一定的偏差的概率可能，多轮叠加后，偏差会越来越大，且急剧增加</li><li>AI 可能会重复开发类似的功能，导致代码膨胀冗余，维护难度加大</li><li>写小工具和shell脚本真的强，原因是轮数不会很多，项目整体结构也不会太复杂</li><li>项目一旦上规模，打磨spec的时间成指数增长，连lib特定版本的坑也得明确地写进去</li><li>ai 是提升效率，而非替代。替代的是不用 ai 的程序员</li><li>有前端和后端的项目，每个新功能要修改逻辑的时候都会有很多的问题，必须要各端独立去修改，否则大概率不理想</li></ul><h2 id="重构时的挑战" tabindex="-1">重构时的挑战 <a class="header-anchor" href="#重构时的挑战" aria-label="Permalink to &quot;重构时的挑战&quot;">​</a></h2><h3 id="不确定性" tabindex="-1">不确定性 <a class="header-anchor" href="#不确定性" aria-label="Permalink to &quot;不确定性&quot;">​</a></h3><ul><li>AI 实现时，可能会做多种尝试，有些是失败的，有些是成功的。对于失败的尝试，会实现多种方案，也会清理失败的代码，但可能清理不全</li><li>多次使用AI，可能会得到不同的结果，因此可能会存在冗余或重复的代码</li><li>每次完成前，需要小心清理，可以列出清单，问 AI 是否需要这些代码，让它重新思考一下，如果不需要，就清理掉</li><li>你可以让AI快速生成一个能用的东西，但你完全不理解它是怎么实现的。想改一点点？做不到。只能整个扔掉重新生成。</li></ul><h2 id="典型案例-失败再现" tabindex="-1">典型案例 - 失败再现 <a class="header-anchor" href="#典型案例-失败再现" aria-label="Permalink to &quot;典型案例 - 失败再现&quot;">​</a></h2><h3 id="场景描述" tabindex="-1">场景描述 <a class="header-anchor" href="#场景描述" aria-label="Permalink to &quot;场景描述&quot;">​</a></h3><ul><li>一个 web 项目，后端用 python 的 fastapi 框架，前端用 vue3 框架。</li><li>项目开始很正常，用户登录功能完好。</li><li>在加了一个功能后，发现用户登录后会有警告信息，告知 AI 解决此问题</li></ul><div class="language-plaintext vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>登录成功了，但是登录成功后，控制台有报警信息。</span></span>
<span class="line"><span>Auth Store: 显示登录对话框</span></span>
<span class="line"><span>auth.js:151 Auth Store: 登录后用户信息已设置: {id: 2, username: &#39;changjiang&#39;, nickname: &#39;长江&#39;, role: &#39;admin&#39;, created_at: &#39;2025-11-04T07:07:59&#39;, …}</span></span>
<span class="line"><span>auth.js:156 Auth Store: 登录成功，用户: changjiang</span></span>
<span class="line"><span>auth.js:213 Auth Store: 隐藏登录对话框</span></span>
<span class="line"><span>2LoginDialog.vue:3 [Vue warn] Write operation failed: computed value is readonly</span></span></code></pre></div><h3 id="第一轮失败的尝试" tabindex="-1">第一轮失败的尝试 <a class="header-anchor" href="#第一轮失败的尝试" aria-label="Permalink to &quot;第一轮失败的尝试&quot;">​</a></h3><ul><li>看上去是个简单的问题，告知 AI ，让它自己去解决这个问题</li><li>AI 改了一轮，发现问题更严重了</li><li>AI 改了多轮后，发现问题越来越严重，改动了很多次</li><li>AI 在某次改动后，觉得应该是后端接口有问题，开始改起了后端的代码</li><li>此时被我果断喊停。感觉不能让它继续放飞自我了，于是回滚代码，重新开始</li></ul><h3 id="第二轮失败的尝试" tabindex="-1">第二轮失败的尝试 <a class="header-anchor" href="#第二轮失败的尝试" aria-label="Permalink to &quot;第二轮失败的尝试&quot;">​</a></h3><ul><li>提示词里明确了边界，不要去改后端代码，这就是前端代码问题。并告知了几个上一轮它自己得出的结论</li></ul><div class="language-plaintext vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>登录成功了，但是登录成功后，控制台有条报警信息。你要谨慎修改它，之前有1次都是改这个问题时，弄得一直错，而且</span></span>
<span class="line"><span>越改错得越离谱。注意，先理解先理解了Pinia的ref解包机制：在store中定义的ref在外部访问时会被自动解包成普通</span></span>
<span class="line"><span>响应式对象。其次，这个问题一定是前端代码错误导致的，不要去改后端代码。</span></span>
<span class="line"><span>Auth Store: 显示登录对话框</span></span>
<span class="line"><span>auth.js:151 Auth Store: 登录后用户信息已设置: {id: 2, username: &#39;changjiang&#39;, nickname: &#39;长江&#39;, role: &#39;admin&#39;, created_at: &#39;2025-11-04T07:07:59&#39;, …}</span></span>
<span class="line"><span>auth.js:156 Auth Store: 登录成功，用户: changjiang</span></span>
<span class="line"><span>auth.js:213 Auth Store: 隐藏登录对话框</span></span>
<span class="line"><span>2LoginDialog.vue:3 [Vue warn] Write operation failed: computed value is readonly</span></span></code></pre></div><ul><li>AI 改了很多轮，发现绕来绕去，开始绕圈子了，问题无法解决，于是提示词里指出绕圈子的问题</li><li>AI 无法搞定，给了一个让人啼笑皆非的回复。感觉可能是它内部设定的尝试上限到了，所以打算撂挑子了</li></ul><div class="language-plaintext vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>  现在我回到了最原始的实现，它应该能解决422错误和大部分Vue警告。原始实现利用了Pinia的自动解包特性，虽然这之</span></span>
<span class="line"><span>  前导致了422错误，但可能是因为缓存问题。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  这个实现与项目最初的工作版本相同：</span></span>
<span class="line"><span>   - 使用computed返回authStore.loginForm</span></span>
<span class="line"><span>   - 使用v-model进行双向绑定</span></span>
<span class="line"><span>   - 保持了所有原始功能</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  如果原始代码中确实存在Vue警告，那它可能是一个更深层的框架或Element Plus内部的问题，而不是我们代码的问题。但</span></span>
<span class="line"><span>  至少登录功能现在应该能正常运行，而我们添加的数据管理功能也保持完好。</span></span></code></pre></div><h3 id="解决方案-它山之石可以攻玉" tabindex="-1">解决方案 - 它山之石可以攻玉 <a class="header-anchor" href="#解决方案-它山之石可以攻玉" aria-label="Permalink to &quot;解决方案 - 它山之石可以攻玉&quot;">​</a></h3><ul><li>于是我在网页版的 Qwen 里提问，将警告信息和对应的源代码文件贴给它</li><li>Qwen 快速给了一个看上去很靠谱的答案</li></ul><div class="language-plaintext vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>你遇到的 Vue 警告：</span></span>
<span class="line"><span>[Vue warn] Write operation failed: computed value is readonly</span></span>
<span class="line"><span>根本原因在于：**你试图直接修改一个由 `computed` 创建的只读值（readonly computed ref）**。</span></span>
<span class="line"><span>---</span></span>
<span class="line"><span></span></span>
<span class="line"><span>### 🔍 问题定位</span></span>
<span class="line"><span></span></span>
<span class="line"><span>从错误堆栈和你的代码来看，问题出在：</span></span>
<span class="line"><span>v-model=&quot;showLoginDialog&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>而 `showLoginDialog` 是从 `useAuth()` 中解构出来的，**它很可能是一个 `computed` 属性（例如</span></span>
<span class="line"><span>来自 Pinia store 的 state 或 getter）**，而不是一个可写的 `ref`。</span></span>
<span class="line"><span>在 Vue 3 中，`v-model` 会尝试对绑定的变量执行 **写操作（即赋值）**，例如当用户点击关闭按钮或</span></span>
<span class="line"><span>按 ESC 时，`el-dialog` 会尝试把 `showLoginDialog` 设为 `false`。</span></span>
<span class="line"><span>但如果 `showLoginDialog` 是一个 `computed(() =&gt; store.showLoginDialog)`（只读），那么 Vue 会</span></span>
<span class="line"><span>拒绝写入，并抛出这个警告。</span></span>
<span class="line"><span>---</span></span>
<span class="line"><span></span></span>
<span class="line"><span>### ✅ 正确做法</span></span>
<span class="line"><span></span></span>
<span class="line"><span>你不应该直接对 store 中的状态使用 `v-model`，尤其是当它是只读的（比如来自 Pinia 的 state，</span></span>
<span class="line"><span>通过 `storeToRefs` 或 `computed` 暴露时）。</span></span>
<span class="line"><span>#### 推荐解决方案：使用 **可写的 computed（带 setter）** 或 **本地 ref + 同步**</span></span>
<span class="line"><span>但更符合 Vue + Pinia 最佳实践的方式是：**不要让 UI 直接修改 store 状态，而是通过 actions**。</span></span>
<span class="line"><span>---</span></span>
<span class="line"><span></span></span>
<span class="line"><span>### ✅ 修复方案一（推荐）：**不在组件内用 v-model 直接绑定 store 状态**</span></span>
<span class="line"><span>修改 `LoginDialog.vue`：</span></span>
<span class="line"><span>#### 1. 在 setup 中创建一个 **本地 ref** 来控制对话框显隐</span></span>
<span class="line"><span>const dialogVisible = ref(false)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#### 2. 用 watch 监听 store 中的 `showLoginDialog`，同步到本地</span></span>
<span class="line"><span>watch(</span></span>
<span class="line"><span>  () =&gt; showLoginDialog.value,</span></span>
<span class="line"><span>  (val) =&gt; {</span></span>
<span class="line"><span>    dialogVisible.value = val</span></span>
<span class="line"><span>  },</span></span>
<span class="line"><span>  { immediate: true }</span></span>
<span class="line"><span>)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#### 3. 当本地 dialog 关闭时，调用 action 关闭 store 中的状态</span></span>
<span class="line"><span>const handleDialogUpdate = (visible) =&gt; {</span></span>
<span class="line"><span>  dialogVisible.value = visible</span></span>
<span class="line"><span>  if (!visible) {</span></span>
<span class="line"><span>    handleCancelLogin() // 这个 action 应该会 commit 关闭对话框</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#### 4. 模板中绑定本地变量，并监听更新</span></span>
<span class="line"><span>&lt;el-dialog</span></span>
<span class="line"><span>  v-model=&quot;dialogVisible&quot;</span></span>
<span class="line"><span>  @update:modelValue=&quot;handleDialogUpdate&quot;</span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&gt; 注意：Element Plus 的 `el-dialog` 的 `v-model` 对应的是 `modelValue` prop 和 `update:modelValue` 事件。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>---</span></span>
<span class="line"><span> ...</span></span>
<span class="line"><span>---</span></span>
<span class="line"><span></span></span>
<span class="line"><span>### 🔚 总结</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- **错误原因**：`showLoginDialog` 是只读的 computed，但 `v-model` 试图写入它。</span></span>
<span class="line"><span>- **解决方案**：</span></span>
<span class="line"><span>  - 方案 A（推荐）：使用本地 `ref` 控制 `el-dialog`，通过 watch 和事件与 store 同步。</span></span>
<span class="line"><span>  - 方案 B：将 `showLoginDialog` 改为带 setter 的可写 computed，setter 中调用 Pinia actions。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&gt; 考虑到你已经在 `handleCancelLogin` 和 `hideLoginDialog` 中有 action，**方案 A 更清晰、更符合单向数据流**，也避免了在模板中隐式修改状态。</span></span></code></pre></div><ul><li>我将这个答案直接贴给了 AI ，它立即就给了一个新的实现，果然问题解决了。</li></ul><h2 id="典型案例-优化和重构" tabindex="-1">典型案例 - 优化和重构 <a class="header-anchor" href="#典型案例-优化和重构" aria-label="Permalink to &quot;典型案例 - 优化和重构&quot;">​</a></h2><h3 id="第一轮优化" tabindex="-1">第一轮优化 <a class="header-anchor" href="#第一轮优化" aria-label="Permalink to &quot;第一轮优化&quot;">​</a></h3><ul><li>完成了一个页面，页面里包含3个标签页，所有功能都正常了</li><li>让 AI 分析这个页面所涉及的代码，是否有逻辑重复、错误、冗余等问题，是否需要优化</li><li>AI 一通分析，于是让它优化</li></ul><h3 id="第二轮优化" tabindex="-1">第二轮优化 <a class="header-anchor" href="#第二轮优化" aria-label="Permalink to &quot;第二轮优化&quot;">​</a></h3><ul><li>考虑到最近也改写了身份认证的功能，所以让 AI 结合 身份认证 及 刚才这个页面 所涉及的代码，是否有逻辑重复、错误、冗余等问题，是否需要优化</li><li>AI 一通分析，于是让它优化</li><li>结果神奇地发现将一堆身份认证功能又塞回了页面中多个组件中，让每个组件各自判断身份认证是否成功，而不是我们之前做的路由守卫等机制</li><li>告诉 AI ，我需要将这些身份认证功能提取出来，放到一个单独的组件中，让它统一管理</li><li>AI 一通修改。</li></ul><h3 id="第三轮优化" tabindex="-1">第三轮优化 <a class="header-anchor" href="#第三轮优化" aria-label="Permalink to &quot;第三轮优化&quot;">​</a></h3><ul><li>重新让 AI 分析之前已经优化过的代码，是否存在逻辑重复、错误、冗余等问题</li><li>AI 一通分析，发现还有问题，又要优化</li><li>优化无止境吗？强烈怀疑中</li></ul><h3 id="ai-的迷之行为" tabindex="-1">AI 的迷之行为 <a class="header-anchor" href="#ai-的迷之行为" aria-label="Permalink to &quot;AI 的迷之行为&quot;">​</a></h3><ul><li>总是改些什么东西，把登录改坏，一直错一直错</li><li>居然把密码些在 placeholder 中，不知道是啥思路</li></ul></div></div></main><footer class="VPDocFooter" data-v-0071ecf2 data-v-88af81f8><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-88af81f8><span class="visually-hidden" id="doc-footer-aria-label" data-v-88af81f8>Pager</span><div class="pager" data-v-88af81f8><!----></div><div class="pager" data-v-88af81f8><a class="VPLink link pager-link next" href="/publish/think/full-stack-engineer.html" data-v-88af81f8><!--[--><span class="desc" data-v-88af81f8>Next page</span><span class="title" data-v-88af81f8>AI时代的全栈工程师</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-517c61da data-v-27f89626><div class="container" data-v-27f89626><p class="message" data-v-27f89626>基于 MIT 许可发布。</p><p class="copyright" data-v-27f89626>Copyright © 2025-present</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"about.md\":\"DRlHO4k3\",\"ai_future-of-ai.md\":\"2ZgjJuIb\",\"ai_vibe-coding.md\":\"Bx2FbgnA\",\"foundation_data-structure.md\":\"DA8Inaag\",\"foundation_vibe-coding.md\":\"DLPe5ehi\",\"fullstack_ai-design.md\":\"B_yfBlRZ\",\"fullstack_ai-images-01.md\":\"D4Gjqhfv\",\"fullstack_ai-movie.md\":\"BsS_raU0\",\"fullstack_ci-cd.md\":\"DsSsIkUK\",\"fullstack_cursor-mcp-to-figma.md\":\"DNzI_gsh\",\"fullstack_deep-search.md\":\"CwupEEX4\",\"fullstack_from-figma-to-mini.md\":\"5LKPcUIu\",\"fullstack_github-pages.md\":\"Btd3_ZVR\",\"fullstack_hybrid-rendering.md\":\"DY6MVxxP\",\"fullstack_refactor-vitepress-project.md\":\"DccYn3_N\",\"fullstack_set-up-on-tencent-cloud.md\":\"C5DzDcMo\",\"fullstack_ssh.md\":\"BBFVsDUL\",\"fullstack_vue-store-composable.md\":\"BQ42a1J2\",\"index.md\":\"DZpq5R3K\",\"search.md\":\"CCuKW7Zb\",\"system_github-pages.md\":\"ClTTkViw\",\"system_history.md\":\"C0PrT-uM\",\"system_latex-spec.md\":\"Dq5YIpiu\",\"system_test-mermaid-modal.md\":\"_R2Y5HgI\",\"think_ai-benefits-4-pm.md\":\"CjLaIe8m\",\"think_ai-coding-01.md\":\"HAOsu6My\",\"think_ai-coding-02.md\":\"DwzfIXps\",\"think_ai-coding-03.md\":\"8x8wYpmn\",\"think_business-value-of-ai-agents.md\":\"KGTC1kZt\",\"think_full-stack-engineer.md\":\"WVD1LwjX\",\"think_junior.md\":\"CZrQl2G2\",\"think_pm.md\":\"DvDhoDLj\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"AI时代的技术分享\",\"description\":\"AI时代的技术分享和感悟\",\"base\":\"/publish/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"outline\":\"deep\",\"locales\":{\"en\":{\"outline\":{\"label\":\"本页内容\"},\"docFooter\":{\"prev\":\"上一篇\",\"next\":\"下一篇\"},\"lastUpdatedText\":\"最后更新于\",\"darkModeSwitchLabel\":\"主题\",\"sidebarMenuLabel\":\"菜单\",\"returnToTopLabel\":\"回到顶部\"}},\"nav\":[{\"text\":\"首页\",\"link\":\"/\",\"order\":1,\"type\":\"static\"},{\"text\":\"搜索\",\"link\":\"/search.html\",\"order\":25,\"type\":\"static\"},{\"text\":\"人工智能\",\"link\":\"/ai/future-of-ai\",\"category\":\"ai\",\"description\":\"关于人工智能的文章\",\"count\":2,\"order\":50,\"type\":\"dynamic\"},{\"text\":\"基础知识\",\"link\":\"/foundation/data-structure\",\"category\":\"foundation\",\"description\":\"不积跬步无以至千里\",\"count\":2,\"order\":50,\"type\":\"dynamic\"},{\"text\":\"全栈开发\",\"link\":\"/fullstack/ci-cd\",\"category\":\"fullstack\",\"description\":\"全栈开发势不可挡\",\"count\":13,\"order\":50,\"type\":\"dynamic\"},{\"text\":\"观察思考\",\"link\":\"/think/ai-coding-03\",\"category\":\"think\",\"description\":\"洞察未来的趋势\",\"count\":8,\"order\":50,\"type\":\"dynamic\"},{\"text\":\"关于\",\"link\":\"/system/history\",\"order\":99,\"type\":\"static\"}],\"sidebar\":{\"/ai/\":[{\"text\":\"人工智能\",\"items\":[{\"text\":\"人工智能的未来发展-2026-14\",\"link\":\"/ai/future-of-ai\"},{\"text\":\"沉浸式编程体验\",\"link\":\"/ai/vibe-coding\"}]}],\"/foundation/\":[{\"text\":\"基础知识\",\"items\":[{\"text\":\"计算机基础知识-2027-15\",\"link\":\"/foundation/data-structure\"},{\"text\":\"沉浸式编程基础知识\",\"link\":\"/foundation/vibe-coding\"}]}],\"/fullstack/\":[{\"text\":\"全栈开发\",\"items\":[{\"text\":\"CI/CD释疑\",\"link\":\"/fullstack/ci-cd\"},{\"text\":\"重构 Vitepress 项目\",\"link\":\"/fullstack/refactor-vitepress-project\"},{\"text\":\"在腾讯云中部署\",\"link\":\"/fullstack/set-up-on-tencent-cloud\"},{\"text\":\"Vue 中的 Store 与 Composable\",\"link\":\"/fullstack/vue-store-composable\"},{\"text\":\"AI 的深度检索\",\"link\":\"/fullstack/deep-search\"},{\"text\":\"AI 制作长视频实践\",\"link\":\"/fullstack/ai-movie\"},{\"text\":\"AI 生图使用\",\"link\":\"/fullstack/ai-images-01\"},{\"text\":\"Figma MCP 与 Cursor 配合使用\",\"link\":\"/fullstack/cursor-mcp-to-figma\"},{\"text\":\"从 Figma 还原小程序代码\",\"link\":\"/fullstack/from-figma-to-mini\"},{\"text\":\"使用 GitHub Pages 部署静态网站\",\"link\":\"/fullstack/github-pages\"},{\"text\":\"AI时代设计开发工作流\",\"link\":\"/fullstack/ai-design\"},{\"text\":\"web 网站的混合渲染\",\"link\":\"/fullstack/hybrid-rendering\"},{\"text\":\"ssh 原理图\",\"link\":\"/fullstack/ssh\"}]}],\"/think/\":[{\"text\":\"观察思考\",\"items\":[{\"text\":\"AI辅助编程03-AI时代编程的尽头是软件工程，印度人也是怎么想的吗？真是的\",\"link\":\"/think/ai-coding-03\"},{\"text\":\"AI时代的全栈工程师\",\"link\":\"/think/full-stack-engineer\"},{\"text\":\"AI Agents 的商业价值\",\"link\":\"/think/business-value-of-ai-agents\"},{\"text\":\"AI时代初级岗位是否存在\",\"link\":\"/think/junior\"},{\"text\":\"AI 给产品经理带来的帮助\",\"link\":\"/think/ai-benefits-4-pm\"},{\"text\":\"AI草莽时代的产品经理肖像分析\",\"link\":\"/think/pm\"},{\"text\":\"AI辅助编程02-注意事项\",\"link\":\"/think/ai-coding-02\"},{\"text\":\"AI辅助编程01-初体验\",\"link\":\"/think/ai-coding-01\"}]}],\"/\":[{\"text\":\"本站相关\",\"items\":[{\"text\":\"版本历史\",\"link\":\"/system/history\"},{\"text\":\"LaTeX 规范\",\"link\":\"/system/latex-spec\"},{\"text\":\"Mermaid 弹框测试\",\"link\":\"/system/test-mermaid-modal\"},{\"text\":\"关于\",\"link\":\"/about\"}]}]},\"footer\":{\"message\":\"基于 MIT 许可发布。\",\"copyright\":\"Copyright © 2025-present\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>