import{_ as $,p as _,h as M,v as V,c as o,o as r,a1 as m,j as n,F as g,B as p,a as x,t as u,n as k,k as Y,g as y,G as B}from"./chunks/framework.BX-G93LU.js";const E={class:"article-list"},N={key:0,class:"loading-state"},P={key:1,class:"error-state"},j={key:2},b=["onClick"],F={class:"month-title"},I={class:"article-date"},L={class:"article-title"},O=["href"],R={__name:"ArticleList",setup(S){const l=_({}),d=_(!0),v=_(!1),i=_([]);function A(a){l.value[a]=!l.value[a]}function h(a){const e=new Date(a),t=e.getFullYear(),s=e.getMonth()+1;return{year:t,month:s}}function D(a){const e=new Date(a),t=e.getMonth()+1,s=e.getDate().toString().padStart(2,"0");return`${t}-${s}`}const f=M(()=>{const a=new Set;return i.value.forEach(e=>{const{year:t}=h(e.date);a.add(t)}),Array.from(a).sort((e,t)=>t-e)});function T(a){const e=new Set;return i.value.forEach(t=>{const{year:s,month:c}=h(t.date);s===a&&e.add(c)}),Array.from(e).sort((t,s)=>s-t)}function C(a,e){return i.value.filter(t=>{const{year:s,month:c}=h(t.date);return s===a&&c===e}).sort((t,s)=>new Date(s.date)-new Date(t.date))}async function w(){try{d.value=!0,v.value=!1;const a=await fetch(y("/data/list.json"));if(!a.ok)throw new Error("无法加载数据文件");const e=await a.json();i.value=(e.articles||[]).sort((t,s)=>new Date(s.date)-new Date(t.date)),f.value.forEach(t=>{l.value[`${t}年`]=!1}),console.log("Sorted years:",f.value),console.log("Articles:",i.value),d.value=!1}catch(a){console.error("加载文章数据失败:",a),d.value=!1,v.value=!0}}return V(()=>{w()}),(a,e)=>(r(),o("div",E,[d.value?(r(),o("div",N,e[0]||(e[0]=[m("",2)]))):v.value?(r(),o("div",P,[e[1]||(e[1]=m("",2)),n("button",{onClick:w,class:"retry-button"},"重试")])):(r(),o("div",j,[(r(!0),o(g,null,p(f.value,t=>(r(),o("div",{key:t,class:"year-section"},[n("h2",{class:"year-title",onClick:s=>A(`${t}年`)},[x(u(t)+"年 ",1),n("span",{class:k(["toggle-icon",{collapsed:l.value[`${t}年`]}])},u(l.value[`${t}年`]?"▶":"▼"),3)],8,b),n("div",{class:k(["year-content",{hidden:l.value[`${t}年`]}])},[(r(!0),o(g,null,p(T(t),s=>(r(),o("div",{key:`${t}-${s}`,class:"month-section"},[n("h3",F,u(s)+"月",1),n("ul",null,[(r(!0),o(g,null,p(C(t,s),c=>(r(),o("li",{key:c.url},[n("span",I,u(D(c.date)),1),n("span",L,[n("a",{href:Y(y)(c.url)},u(c.title),9,O)])]))),128))])]))),128))],2)]))),128))]))]))}},z=$(R,[["__scopeId","data-v-8dc33c9d"]]),q=JSON.parse('{"title":"全部文章列表","description":"","frontmatter":{"layout":"doc","title":"全部文章列表"},"headers":[],"relativePath":"list.md","filePath":"list.md"}'),G={name:"list.md"},H=Object.assign(G,{setup(S){return(l,d)=>(r(),o("div",null,[d[0]||(d[0]=n("h1",{id:"全部文章列表",tabindex:"-1"},[x("全部文章列表 "),n("a",{class:"header-anchor",href:"#全部文章列表","aria-label":'Permalink to "全部文章列表"'},"​")],-1)),B(z)]))}});export{q as __pageData,H as default};
