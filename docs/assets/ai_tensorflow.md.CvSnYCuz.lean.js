import{_ as a,C as h,c as t,o as e,G as k,w as r,j as i,a as s}from"./chunks/framework.CdkaGE7W.js";const F=JSON.parse('{"title":"TensorFlow 基础","description":"TensorFlow","frontmatter":{"title":"TensorFlow 基础","description":"TensorFlow","date":"2025-10-07T00:00:00.000Z","tags":["TensorFlow"]},"headers":[],"relativePath":"ai/tensorflow.md","filePath":"ai/tensorflow.md"}'),d={name:"ai/tensorflow.md"};function p(E,l,o,u,g,y){const n=h("BlogPost");return e(),t("div",null,[k(n,null,{default:r(()=>[...l[0]||(l[0]=[i("h2",{id:"tensorflow中的计算图",tabindex:"-1"},[s("TensorFlow中的"),i("code",null,"计算图"),s(),i("a",{class:"header-anchor",href:"#tensorflow中的计算图","aria-label":'Permalink to "TensorFlow中的`计算图`"'},"​")],-1),i("h3",{id:"含义解释",tabindex:"-1"},[s("含义解释 "),i("a",{class:"header-anchor",href:"#含义解释","aria-label":'Permalink to "含义解释"'},"​")],-1),i("p",null,[i("strong",null,"计算图 - Computation graph"),s(" 是一种用图（graph）结构来表示计算过程的方式。在这个图中：")],-1),i("ul",null,[i("li",null,[i("strong",null,"节点（Nodes）"),s(" 表示操作（operations，简称 ops），比如加法、乘法、矩阵运算、激活函数等。")]),i("li",null,[i("strong",null,"边（Edges）"),s(" 表示数据（通常是张量，tensors）在操作之间的流动。")])],-1),i("h3",{id:"举个简单例子",tabindex:"-1"},[s("举个简单例子 "),i("a",{class:"header-anchor",href:"#举个简单例子","aria-label":'Permalink to "举个简单例子"'},"​")],-1),i("p",null,[s("假设我们要计算 "),i("code",null,"z = (a + b) * c"),s("，那么对应的 computation graph 可能如下：")],-1),i("div",{class:"language-text vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"text"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[i("code",null,[i("span",{class:"line"},[i("span",null,"   a ----\\")]),s(`
`),i("span",{class:"line"},[i("span",null,"          + ----\\")]),s(`
`),i("span",{class:"line"},[i("span",null,"   b ----/       * ----> z")]),s(`
`),i("span",{class:"line"},[i("span",null,"                 /")]),s(`
`),i("span",{class:"line"},[i("span",null,"   c -----------/")])])])],-1),i("ul",null,[i("li",null,[i("code",null,"+"),s(" 和 "),i("code",null,"*"),s(" 是操作节点（ops）。")]),i("li",null,[i("code",null,"a"),s("、"),i("code",null,"b"),s("、"),i("code",null,"c"),s(" 是输入张量（tensors）。")]),i("li",null,"中间的加法结果和最终的乘法结果也是张量，沿着边传递。")],-1),i("h3",{id:"在-tensorflow-中的作用",tabindex:"-1"},[s("在 TensorFlow 中的作用 "),i("a",{class:"header-anchor",href:"#在-tensorflow-中的作用","aria-label":'Permalink to "在 TensorFlow 中的作用"'},"​")],-1),i("ul",null,[i("li",null,[s("在 "),i("strong",null,"TensorFlow 1.x"),s(" 中，计算图是核心概念。用户先构建一个静态图（static graph），然后在会话（Session）中运行它。")]),i("li",null,[s("在 "),i("strong",null,"TensorFlow 2.x"),s(" 中，默认启用了 "),i("strong",null,"eager execution"),s("（动态执行），使得代码像普通 Python 一样立即执行，但 TensorFlow 仍然支持通过 "),i("code",null,"@tf.function"),s(" 装饰器将 Python 函数自动转换为高效的 computation graph，以提升性能和便于部署。")])],-1),i("h3",{id:"计算图的优点",tabindex:"-1"},[s("计算图的优点 "),i("a",{class:"header-anchor",href:"#计算图的优点","aria-label":'Permalink to "计算图的优点"'},"​")],-1),i("ul",null,[i("li",null,"高效执行：图优化（如算子融合）可提升性能。"),i("li",null,"跨平台支持：可导出到移动端、嵌入式设备等。")],-1),i("h3",{id:"",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#","aria-label":'Permalink to ""'},"​")],-1),i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"a "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," tf.constant("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"b "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," tf.constant("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"c "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," a "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," b "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 构建计算图，但不立即计算")])])])],-1),i("ul",null,[i("li",null,"计算图可加速计算，图模式下运算在C++层执行，避免 Python 循环的慢速交互。"),i("li",null,"能并行化优化：自动调度无依赖的节点并行计算（如 GPU/多核CPU）。")],-1),i("h2",{id:"张量",tabindex:"-1"},[s("张量 "),i("a",{class:"header-anchor",href:"#张量","aria-label":'Permalink to "张量"'},"​")],-1),i("blockquote",null,[i("p",null,"张量（Tensor） 是 TensorFlow 中的核心数据结构，可以理解为多维数组。")],-1),i("ul",null,[i("li",null,"标量（0维）：单个数值（如 3.0）。"),i("li",null,"向量（1维）：一维数组（如 [1, 2, 3]）。"),i("li",null,"矩阵（2维）：二维表格（如 [[1, 2], [3, 4]]）。"),i("li",null,"高维张量：如 RGB 图片（3维：[高度, 宽度, 通道]）。")],-1),i("p",null,"张量存储数据，并在计算图中流动，支持自动求导和 GPU 加速。",-1),i("h2",{id:"三维数组",tabindex:"-1"},[s("三维数组 "),i("a",{class:"header-anchor",href:"#三维数组","aria-label":'Permalink to "三维数组"'},"​")],-1),i("h3",{id:"_1-一维数组-1d-array",tabindex:"-1"},[s("1. 一维数组（1D Array） "),i("a",{class:"header-anchor",href:"#_1-一维数组-1d-array","aria-label":'Permalink to "1. 一维数组（1D Array）"'},"​")],-1),i("p",null,[i("strong",null,"形状（shape）"),s("："),i("code",null,"(n,)"),s("，只有一个维度。")],-1),i("p",null,[i("strong",null,"例子"),s("：一个班级5个学生的语文成绩")],-1),i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"scores "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"85"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"92"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"78"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"96"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"88"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]")])])])],-1),i("ul",null,[i("li",null,[s("这是一个"),i("strong",null,"列表"),s("，在 NumPy 或 TensorFlow 中就是一个"),i("strong",null,"一维数组"),s("。")]),i("li",null,[s("可以理解为"),i("strong",null,"一条线"),s("上的数据。")]),i("li",null,[s("访问方式："),i("code",null,"scores[0]"),s(" 表示第一个学生的成绩（85）。")])],-1),i("p",null,[s("✅ "),i("strong",null,"现实类比"),s("：一排座位上坐着5个人，每个人有一个分数。")],-1),i("hr",null,null,-1),i("h3",{id:"_2-二维数组-2d-array",tabindex:"-1"},[s("2. 二维数组（2D Array） "),i("a",{class:"header-anchor",href:"#_2-二维数组-2d-array","aria-label":'Permalink to "2. 二维数组（2D Array）"'},"​")],-1),i("p",null,[i("strong",null,"形状（shape）"),s("："),i("code",null,"(m, n)"),s("，有行和列两个维度。")],-1),i("p",null,[i("strong",null,"例子"),s("：3个学生，每人有3门课的成绩（语文、数学、英语）")],-1),i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"grades "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"85"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"90"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"88"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"],   "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 学生1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"78"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"92"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"85"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"],   "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 学生2")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"96"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"87"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"90"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]    "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 学生3")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]")])])])],-1),i("ul",null,[i("li",null,[s("这是一个"),i("strong",null,"表格"),s("（类似 Excel 表格）。")]),i("li",null,"第一维是“学生”，第二维是“科目”。"),i("li",null,[s("访问方式："),i("code",null,"grades[1][2]"),s(" 表示第2个学生（索引1）的第3门课（索引2）成绩 → 85。")])],-1),i("p",null,[s("✅ "),i("strong",null,"现实类比"),s("：一个 3×3 的棋盘，每个格子存一个数字。")],-1),i("blockquote",null,[i("p",null,[s("💡 在机器学习中，"),i("strong",null,"数据集通常表示为二维数组"),s("：每一行是一个样本，每一列是一个特征。")])],-1),i("hr",null,null,-1),i("h3",{id:"_3-三维数组-3d-array",tabindex:"-1"},[s("3. 三维数组（3D Array） "),i("a",{class:"header-anchor",href:"#_3-三维数组-3d-array","aria-label":'Permalink to "3. 三维数组（3D Array）"'},"​")],-1),i("p",null,[i("strong",null,"形状（shape）"),s("："),i("code",null,"(a, b, c)"),s("，有三个维度。")],-1),i("p",null,[i("strong",null,"例子1：多个学生的多天成绩记录"),i("br"),s(" 假设我们记录2个学生，连续3天，每天考2门课：")],-1),i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"records "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    [               "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 学生0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"85"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"90"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"],   "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 第1天：语文85，数学90")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"88"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"92"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"],   "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 第2天")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"80"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"85"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]    "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 第3天")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ],")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    [               "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 学生1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"78"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"88"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"],   "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 第1天")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"82"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"90"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"],   "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 第2天")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"85"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"87"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]    "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 第3天")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]")])])])],-1),i("ul",null,[i("li",null,[s("形状是 "),i("code",null,"(2, 3, 2)"),s("： "),i("ul",null,[i("li",null,"第1维：2个学生"),i("li",null,"第2维：3天"),i("li",null,"第3维：每天2门课成绩")])])],-1),i("p",null,[s("访问："),i("code",null,"records[0][1][0]"),s(" → 学生0、第2天（索引1）、第1门课（索引0）→ 88。")],-1),i("hr",null,null,-1),i("p",null,[i("strong",null,"例子2：彩色图像（更常见于深度学习）"),i("br"),s(" 一张 64×64 像素的彩色图片，有 RGB 三个颜色通道：")],-1),i("ul",null,[i("li",null,"高度：64 像素"),i("li",null,"宽度：64 像素"),i("li",null,"通道数：3（红、绿、蓝）")],-1),i("p",null,[s("所以图像就是一个 "),i("strong",null,"三维数组"),s("，形状为 "),i("code",null,"(64, 64, 3)"),s("。")],-1),i("ul",null,[i("li",null,[i("code",null,"image[10][20][0]"),s(" 表示第10行、第20列像素的 "),i("strong",null,"红色通道"),s(" 值（0~255）。")])],-1),i("p",null,[s("✅ "),i("strong",null,"现实类比"),s("：像一本“书”：")],-1),i("ul",null,[i("li",null,"每一页是一个二维矩阵（比如一张灰度图），"),i("li",null,"三页叠在一起（R、G、B）就组成一张彩色图。")],-1),i("hr",null,null,-1),i("h3",{id:"总结对比",tabindex:"-1"},[s("总结对比 "),i("a",{class:"header-anchor",href:"#总结对比","aria-label":'Permalink to "总结对比"'},"​")],-1),i("table",{tabindex:"0"},[i("thead",null,[i("tr",null,[i("th",null,"维度"),i("th",null,"形状示例"),i("th",null,"类比"),i("th",null,"常见用途")])]),i("tbody",null,[i("tr",null,[i("td",null,"1D"),i("td",null,[i("code",null,"(5,)")]),i("td",null,"一排数字"),i("td",null,"单个样本的特征、时间序列")]),i("tr",null,[i("td",null,"2D"),i("td",null,[i("code",null,"(3, 4)")]),i("td",null,"表格、矩阵"),i("td",null,"数据集（样本×特征）")]),i("tr",null,[i("td",null,"3D"),i("td",null,[i("code",null,"(2, 3, 4)")]),i("td",null,"一叠表格 / 书"),i("td",null,"多样本时间序列、彩色图像")])])],-1),i("p",null,[s("在 TensorFlow/NumPy 中，数组的维度（"),i("code",null,"ndim"),s("）和形状（"),i("code",null,"shape"),s("）可以通过 "),i("code",null,".ndim"),s(" 和 "),i("code",null,".shape"),s(" 查看。")],-1),i("h2",{id:"传统的计算图-graph-会话-session-模式-tensorflow-1-x",tabindex:"-1"},[s("传统的计算图（Graph）+ 会话（Session）模式（TensorFlow 1.x） "),i("a",{class:"header-anchor",href:"#传统的计算图-graph-会话-session-模式-tensorflow-1-x","aria-label":'Permalink to "传统的计算图（Graph）+ 会话（Session）模式（TensorFlow 1.x）"'},"​")],-1),i("p",null,[s("这个问题问得非常好！要理解 TensorFlow 2.x 的改进，首先需要了解 "),i("strong",null,"TensorFlow 1.x 中“计算图 + 会话”模式"),s("到底是什么。")],-1),i("hr",null,null,-1),i("h3",{id:"一、什么是-传统的计算图-graph-会话-session-模式",tabindex:"-1"},[s("一、什么是“传统的计算图（Graph）+ 会话（Session）模式”？ "),i("a",{class:"header-anchor",href:"#一、什么是-传统的计算图-graph-会话-session-模式","aria-label":'Permalink to "一、什么是“传统的计算图（Graph）+ 会话（Session）模式”？"'},"​")],-1),i("p",null,[s("这是 "),i("strong",null,"TensorFlow 1.x 的默认编程范式"),s("，其核心思想是：")],-1),i("blockquote",null,[i("p",null,[i("strong",null,"先定义，后执行"),s(" —— 先构建一个完整的计算流程（称为“计算图”），然后再通过“会话（Session）”来运行这个图。")])],-1),i("h4",{id:"_1-计算图-graph",tabindex:"-1"},[s("1. "),i("strong",null,"计算图（Graph）"),s(),i("a",{class:"header-anchor",href:"#_1-计算图-graph","aria-label":'Permalink to "1. **计算图（Graph）**"'},"​")],-1),i("ul",null,[i("li",null,[s("计算图是一个"),i("strong",null,"描述计算过程的静态结构"),s("，由节点（操作，如加法、乘法）和边（数据，即张量）组成。")]),i("li",null,[s("它"),i("strong",null,"不立即执行计算"),s("，只是记录“要做什么”。")]),i("li",null,[s("例如："),i("code",null,"c = a + b"),s(" 在图中只是一个“加法操作节点”，并不会立刻算出结果。")])],-1),i("h4",{id:"_2-会话-session",tabindex:"-1"},[s("2. "),i("strong",null,"会话（Session）"),s(),i("a",{class:"header-anchor",href:"#_2-会话-session","aria-label":'Permalink to "2. **会话（Session）**"'},"​")],-1),i("ul",null,[i("li",null,[s("会话是"),i("strong",null,"执行计算图的环境"),s("。")]),i("li",null,[s("只有在 "),i("code",null,"Session.run()"),s(" 被调用时，图中的计算才会真正发生。")]),i("li",null,"你需要显式地启动会话，并告诉它“运行哪个节点”。")],-1),i("hr",null,null,-1),i("h3",{id:"二、tensorflow-1-x-的典型代码示例",tabindex:"-1"},[s("二、TensorFlow 1.x 的典型代码示例 "),i("a",{class:"header-anchor",href:"#二、tensorflow-1-x-的典型代码示例","aria-label":'Permalink to "二、TensorFlow 1.x 的典型代码示例"'},"​")],-1),i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"import"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," tensorflow "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"as"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," tf")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 1. 构建计算图（此时不计算！）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"a "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," tf.constant("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"b "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," tf.constant("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"c "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," a "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," b  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 这只是一个图中的操作节点")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 2. 启动会话并执行")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"with"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," tf.Session() "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"as"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," sess:")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    result "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," sess.run(c)  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 真正计算 c 的值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"    print"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(result)  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 输出 5")])])])],-1),i("p",null,"🔍 关键点：",-1),i("ul",null,[i("li",null,[i("code",null,"a + b"),s(),i("strong",null,"不会立即输出 5"),s("，它只是往图里加了一个加法操作。")]),i("li",null,[s("必须通过 "),i("code",null,"sess.run(c)"),s(" 才能拿到结果。")]),i("li",null,[s("如果想调试中间变量，非常困难（不能直接 "),i("code",null,"print(a)"),s(" 看值，只能 "),i("code",null,"sess.run(a)"),s("）。")])],-1),i("hr",null,null,-1),i("h3",{id:"三、这种模式的问题",tabindex:"-1"},[s("三、这种模式的问题 "),i("a",{class:"header-anchor",href:"#三、这种模式的问题","aria-label":'Permalink to "三、这种模式的问题"'},"​")],-1),i("ol",null,[i("li",null,[i("strong",null,"学习曲线陡峭"),s("：新手很难理解“为什么写了代码却不执行？”")]),i("li",null,[i("strong",null,"调试困难"),s("：无法使用常规的 Python 调试工具（如 print、断点）。")]),i("li",null,[i("strong",null,"代码冗长"),s("：每次都要写 "),i("code",null,"with tf.Session(): ..."),s("。")]),i("li",null,[i("strong",null,"不符合 Python 直觉"),s("：Python 是“写一行，执行一行”，而 TF 1.x 是“先写完所有，再统一执行”。")])],-1),i("hr",null,null,-1),i("h3",{id:"四、tensorflow-2-x-的改进",tabindex:"-1"},[s("四、TensorFlow 2.x 的改进 "),i("a",{class:"header-anchor",href:"#四、tensorflow-2-x-的改进","aria-label":'Permalink to "四、TensorFlow 2.x 的改进"'},"​")],-1),i("p",null,"为了解决上述问题，TF 2.x 做了以下改变：",-1),i("table",{tabindex:"0"},[i("thead",null,[i("tr",null,[i("th",null,"特性"),i("th",null,"TensorFlow 1.x"),i("th",null,"TensorFlow 2.x")])]),i("tbody",null,[i("tr",null,[i("td",null,"默认执行模式"),i("td",null,"图模式（需 Session）"),i("td",null,[i("strong",null,"即时执行（Eager Execution）")])]),i("tr",null,[i("td",null,"调试体验"),i("td",null,"困难"),i("td",null,"像普通 Python 一样简单")]),i("tr",null,[i("td",null,"性能优化"),i("td",null,"依赖静态图"),i("td",null,[s("通过 "),i("code",null,"@tf.function"),s(),i("strong",null,"按需构建图")])])])],-1),i("p",null,[s("✅ "),i("strong",null,"核心思想"),s("：")],-1),i("ul",null,[i("li",null,[i("strong",null,"开发时"),s("：用 Eager 模式，像写 NumPy 一样写代码，随时调试。")]),i("li",null,[i("strong",null,"部署时"),s("：用 "),i("code",null,"@tf.function"),s(" 自动将函数转为高效计算图，保留图的性能优势。")])],-1),i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# TF 2.x：默认即时执行")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"a "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," tf.constant("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"b "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," tf.constant("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"print"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(a "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," b)  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 直接输出结果！")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 需要高性能时，加个装饰器变成图")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"@tf.function")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"def"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fast_add"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x, y):")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," y")])])])],-1),i("h2",{id:"图与会话的现代应用-tensorflow-2-x",tabindex:"-1"},[s("图与会话的现代应用（TensorFlow 2.x） "),i("a",{class:"header-anchor",href:"#图与会话的现代应用-tensorflow-2-x","aria-label":'Permalink to "图与会话的现代应用（TensorFlow 2.x）"'},"​")],-1),i("blockquote",null,[i("p",null,"在 TensorFlow 2.x 中，传统的 计算图（Graph）+ 会话（Session） 模式被大幅简化，但仍保留核心优化能力，主要通过 tf.function 和 即时执行（Eager Execution） 结合使用。")],-1),i("ul",null,[i("li",null,"TF 1.x：需显式构建图和会话，适合高性能场景。"),i("li",null,"TF 2.x：默认即时执行，tf.function实现图模式加速。")],-1),i("h3",{id:"tf-function-自动构建计算图",tabindex:"-1"},[s("tf.function：自动构建计算图 "),i("a",{class:"header-anchor",href:"#tf-function-自动构建计算图","aria-label":'Permalink to "tf.function：自动构建计算图"'},"​")],-1),i("p",null,"作用：将普通 Python 函数转换为 TensorFlow 计算图，提升执行效率（如减少 Python 调用开销）。",-1),i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"@tf.function"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," # 装饰器，自动编译为计算图")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"def"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," add_and_multiply"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x, y):")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," y, x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," y")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"result "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," add_and_multiply("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 首次调用时构建图，后续高效执行")])])])],-1),i("h3",{id:"即时执行-eager-execution",tabindex:"-1"},[s("即时执行（Eager Execution） "),i("a",{class:"header-anchor",href:"#即时执行-eager-execution","aria-label":'Permalink to "即时执行（Eager Execution）"'},"​")],-1),i("ul",null,[i("li",null,"Tensorflow2.0默认模式，一种交互式编程模式，让代码像普通 Python 程序一样逐行运行（类似NumPy），无需先构建计算图，便于调试。")],-1),i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"a "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," tf.constant("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"b "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," tf.constant("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"print"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(a "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," b) "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 直接输出 5，无需 Session")])])])],-1),i("ul",null,[i("li",null,[s("与图的协作： "),i("ul",null,[i("li",null,"调试时：用即时执行快速验证逻辑。"),i("li",null,"部署时：用 @tf.function 转换为图模式提升性能。")])])],-1)])]),_:1})])}const b=a(d,[["render",p]]);export{F as __pageData,b as default};
