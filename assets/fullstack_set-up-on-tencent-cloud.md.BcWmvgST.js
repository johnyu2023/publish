import{_ as i,c as a,o as n,a1 as l}from"./chunks/framework.6sy4tsQT.js";const p="/publish/assets/fullstack/set-up-on-tencent-cloud/tencent-cloud-console.png",h="/publish/assets/fullstack/set-up-on-tencent-cloud/lighthouse.png",t="/publish/assets/fullstack/set-up-on-tencent-cloud/firewall.png",k="/publish/assets/fullstack/set-up-on-tencent-cloud/dbeaver-create-postgresql.png",e="/publish/assets/fullstack/set-up-on-tencent-cloud/dbeaver-download.png",C=JSON.parse('{"title":"åœ¨è…¾è®¯äº‘ä¸­éƒ¨ç½² - PostgreSQL","description":"è®°å½•åœ¨è…¾è®¯äº‘éƒ¨ç½² PostgreSQL æ•°æ®åº“çš„è¿‡ç¨‹","frontmatter":{"title":"åœ¨è…¾è®¯äº‘ä¸­éƒ¨ç½² - PostgreSQL","description":"è®°å½•åœ¨è…¾è®¯äº‘éƒ¨ç½² PostgreSQL æ•°æ®åº“çš„è¿‡ç¨‹","date":"2025-12-27T00:00:00.000Z","tags":["è…¾è®¯äº‘","PostgreSQL"]},"headers":[],"relativePath":"fullstack/set-up-on-tencent-cloud.md","filePath":"fullstack/set-up-on-tencent-cloud.md"}'),r={name:"fullstack/set-up-on-tencent-cloud.md"};function d(F,s,g,o,y,E){return n(),a("div",null,[...s[0]||(s[0]=[l('<h2 id="è…¾è®¯äº‘è½»é‡åº”ç”¨æœåŠ¡å™¨" tabindex="-1">è…¾è®¯äº‘è½»é‡åº”ç”¨æœåŠ¡å™¨ <a class="header-anchor" href="#è…¾è®¯äº‘è½»é‡åº”ç”¨æœåŠ¡å™¨" aria-label="Permalink to &quot;è…¾è®¯äº‘è½»é‡åº”ç”¨æœåŠ¡å™¨&quot;">â€‹</a></h2><h3 id="å®˜ç½‘" tabindex="-1">å®˜ç½‘ <a class="header-anchor" href="#å®˜ç½‘" aria-label="Permalink to &quot;å®˜ç½‘&quot;">â€‹</a></h3><ul><li><a href="https://cloud.tencent.com/" target="_blank" rel="noreferrer">è…¾è®¯äº‘å®˜ç½‘</a>ï¼Œå¾®ä¿¡æ‰«ç å¯ä»¥ç™»é™†</li><li><a href="https://console.cloud.tencent.com/" target="_blank" rel="noreferrer">è…¾è®¯äº‘æ§åˆ¶å°</a>ï¼Œåœ¨æ§åˆ¶å°ï¼Œç‚¹å‡»â€œè½»é‡åº”ç”¨æœåŠ¡å™¨â€</li></ul><p><img src="'+p+'" alt="æ§åˆ¶å°"></p><hr><h3 id="è½»é‡åº”ç”¨æœåŠ¡å™¨-lighthouse" tabindex="-1">è½»é‡åº”ç”¨æœåŠ¡å™¨ Lighthouse <a class="header-anchor" href="#è½»é‡åº”ç”¨æœåŠ¡å™¨-lighthouse" aria-label="Permalink to &quot;è½»é‡åº”ç”¨æœåŠ¡å™¨ Lighthouse&quot;">â€‹</a></h3><ul><li>è½»é‡åº”ç”¨æœåŠ¡å™¨ï¼ˆTencent Cloud Lighthouseï¼‰æ˜¯æ–°ä¸€ä»£å¼€ç®±å³ç”¨ã€é¢å‘<strong>è½»é‡åº”ç”¨åœºæ™¯</strong>çš„äº‘æœåŠ¡å™¨äº§å“ï¼ŒåŠ©åŠ›ä¸­å°ä¼ä¸šå’Œå¼€å‘è€…ä¾¿æ·é«˜æ•ˆçš„åœ¨äº‘ç«¯æ„å»ºç½‘ç«™ã€Webåº”ç”¨ã€å°ç¨‹åº/å°æ¸¸æˆã€æ¸¸æˆæœã€ç”µå•†åº”ç”¨ã€äº‘ç›˜/å›¾åºŠå’Œå¼€å‘æµ‹è¯•ç¯å¢ƒï¼Œç›¸æ¯”æ™®é€šäº‘æœåŠ¡å™¨æ›´åŠ ç®€å•æ˜“ç”¨ä¸”æ›´è´´è¿‘åº”ç”¨ï¼Œä»¥å¥—é¤å½¢å¼æ•´ä½“å”®å–äº‘èµ„æºå¹¶æä¾›é«˜å¸¦å®½æµé‡åŒ…ï¼Œå°†çƒ­é—¨è½¯ä»¶æ‰“åŒ…å®ç°ä¸€é”®æ„å»ºåº”ç”¨ï¼Œæä¾›æç®€ä¸Šäº‘ä½“éªŒã€‚</li></ul><p><img src="'+h+`" alt="è½»é‡åº”ç”¨æœåŠ¡å™¨"></p><hr><h3 id="æœåŠ¡å™¨é»˜è®¤æ˜¯-windows-ç³»ç»Ÿ" tabindex="-1">æœåŠ¡å™¨é»˜è®¤æ˜¯ windows ç³»ç»Ÿ <a class="header-anchor" href="#æœåŠ¡å™¨é»˜è®¤æ˜¯-windows-ç³»ç»Ÿ" aria-label="Permalink to &quot;æœåŠ¡å™¨é»˜è®¤æ˜¯ windows ç³»ç»Ÿ&quot;">â€‹</a></h3><ul><li>çœ‹æ–‡æ¡£è¯´ï¼Œç”¨<code>PuTTY</code>è¿æ¥æœåŠ¡å™¨ï¼Œä½†æ‰“å¼€PuTTYåï¼Œç‚¹å‡»openæŒ‰é’®ï¼Œå¼¹æ¡†æŠ¥é”™ï¼š<code>Network error: Connection refused</code></li><li><code>è½»é‡äº‘AIåŠ©æ‰‹</code>è¯Šæ–­ç»“æœå¦‚ä¸‹</li></ul><div class="language-plaintext vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ç™»å½•å¤±è´¥åŸå› å·²æ˜ç¡®ï¼š</span></span>
<span class="line"><span></span></span>
<span class="line"><span>åè®®é”™è¯¯ï¼šPuTTYæ˜¯SSHå·¥å…·ï¼Œè€Œæ‚¨çš„å®ä¾‹ä¸ºWindowsç³»ç»Ÿï¼Œéœ€ä½¿ç”¨è¿œç¨‹æ¡Œé¢ï¼ˆRDPï¼‰åè®®ç™»å½•ã€‚</span></span>
<span class="line"><span>æ­£ç¡®ç™»å½•æ–¹å¼ï¼š</span></span>
<span class="line"><span>Windowsæœ¬åœ°ï¼šæŒ‰Win+Rè¾“å…¥mstscï¼Œè¿æ¥1.117.233.30:3389</span></span>
<span class="line"><span>OrcaTermï¼šé€‰æ‹©â€œè¿œç¨‹æ¡Œé¢â€æ–¹å¼ï¼ˆéSSHï¼‰</span></span>
<span class="line"><span>å¯†ç é—®é¢˜ï¼šè‹¥å¿˜è®°å¯†ç ï¼Œéœ€é€šè¿‡æ§åˆ¶å°é‡ç½®ï¼ˆå½“å‰å®ä¾‹æ”¯æŒå¯†ç é‡ç½®ï¼‰</span></span>
<span class="line"><span>ä¸‹ä¸€æ­¥å»ºè®®ï¼š</span></span>
<span class="line"><span>ç¡®è®¤ä½¿ç”¨Administratorè´¦å·å’Œæ­£ç¡®å¯†ç </span></span>
<span class="line"><span>æ£€æŸ¥æœ¬åœ°ç½‘ç»œæ˜¯å¦å±è”½3389ç«¯å£</span></span>
<span class="line"><span>å¦‚ä»å¤±è´¥ï¼Œå¯å°è¯•æ§åˆ¶å°VNCç´§æ€¥ç™»å½•</span></span></code></pre></div><ul><li>åˆ†æï¼šè®¡åˆ’éƒ¨ç½² PostgreSQL + Python (FastAPI) + Vue â†’ è¿™æ˜¯å…¸å‹çš„ Linux æŠ€æœ¯æ ˆ</li><li>ç»“è®º: éœ€è¦é‡æ–°å®‰è£… Linux ç³»ç»Ÿï¼Œä¸èƒ½ç”¨ Windows ç³»ç»Ÿã€‚</li></ul><hr><h3 id="æœåŠ¡å™¨é‡è£…ç³»ç»Ÿ-linux" tabindex="-1">æœåŠ¡å™¨é‡è£…ç³»ç»Ÿ - Linux <a class="header-anchor" href="#æœåŠ¡å™¨é‡è£…ç³»ç»Ÿ-linux" aria-label="Permalink to &quot;æœåŠ¡å™¨é‡è£…ç³»ç»Ÿ - Linux&quot;">â€‹</a></h3><ul><li>é‡è£…ç³»ç»Ÿæ—¶ï¼Œæœ‰å¤šç§ç³»ç»Ÿå¯é€‰ï¼Œå¦‚<code>OpenCloudOSã€CentOSã€CentOS Streamã€Ubuntuã€Debianã€Rocky Linuxã€Windows Server</code>ã€‚</li><li>å»ºè®®é€‰æ‹© Ubuntuï¼Œç†ç”±å¦‚ä¸‹ï¼š <ul><li>ç¤¾åŒºæ”¯æŒæå¼ºï¼š90% ä»¥ä¸Šå¼€æºé¡¹ç›®ï¼ˆåŒ…æ‹¬ FastAPIã€PostgreSQL å®˜æ–¹æ–‡æ¡£ï¼‰ä¼˜å…ˆæä¾› Ubuntu å®‰è£…æŒ‡å—ã€‚</li><li>åŒ…ç®¡ç†ç®€å•ï¼šapt å‘½ä»¤ç›´è§‚ï¼Œè½¯ä»¶æºä¸°å¯Œï¼ŒPostgreSQLã€Pythonã€Nginx ç­‰ä¸€é”®å®‰è£…ã€‚</li><li>LTSï¼ˆé•¿æœŸæ”¯æŒï¼‰ï¼š22.04 ç‰ˆæœ¬æ”¯æŒåˆ° 2027 å¹´ï¼Œç¨³å®šå¯é ã€‚</li><li>èµ„æºå ç”¨ä½ï¼šé»˜è®¤å®‰è£…ä»…å  ~300MB å†…å­˜ï¼Œ2æ ¸4G å®Œå…¨å¤Ÿç”¨ã€‚</li><li>è…¾è®¯äº‘ä¼˜åŒ–ï¼šUbuntu æ˜¯è…¾è®¯äº‘/é˜¿é‡Œäº‘ç­‰å‚å•†çš„ä¸»åŠ›é•œåƒï¼Œé©±åŠ¨å’Œå†…æ ¸å…¼å®¹æ€§æœ€å¥½ã€‚</li></ul></li></ul><h2 id="å®‰è£…ç›¸å…³è½¯ä»¶" tabindex="-1">å®‰è£…ç›¸å…³è½¯ä»¶ <a class="header-anchor" href="#å®‰è£…ç›¸å…³è½¯ä»¶" aria-label="Permalink to &quot;å®‰è£…ç›¸å…³è½¯ä»¶&quot;">â€‹</a></h2><h3 id="åŸºç¡€ç³»ç»Ÿé…ç½®" tabindex="-1">åŸºç¡€ç³»ç»Ÿé…ç½® <a class="header-anchor" href="#åŸºç¡€ç³»ç»Ÿé…ç½®" aria-label="Permalink to &quot;åŸºç¡€ç³»ç»Ÿé…ç½®&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ubuntu èº«ä»½æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> upgrade</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºæ™®é€šç®¡ç†å‘˜ç”¨æˆ·ï¼ˆé¿å…é•¿æœŸç”¨ rootï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºç”¨æˆ·ï¼ˆä¾‹å¦‚ deployï¼‰ï¼Œå½“å‰æ˜¯ ubuntu èº«ä»½ï¼Œæ‰€ä»¥è¦åŠ  sudo</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> adduser</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deploy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># èµ‹äºˆ sudo æƒé™</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> usermod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -aG</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deploy</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ‡æ¢åˆ°æ–°ç”¨æˆ·ï¼ˆåç»­æ“ä½œç”¨æ­¤ç”¨æˆ·ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">su</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deploy</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç¡®è®¤æ˜¯å¦æˆåŠŸåˆ‡æ¢åˆ° deploy ç”¨æˆ·</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $USER  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å‡º deploy è¡¨ç¤ºæˆåŠŸ</span></span></code></pre></div><h3 id="å®‰è£…-postgresql" tabindex="-1">å®‰è£… PostgreSQL <a class="header-anchor" href="#å®‰è£…-postgresql" aria-label="Permalink to &quot;å®‰è£… PostgreSQL&quot;">â€‹</a></h3><ul><li>å®‰è£… PostgreSQL æ•°æ®åº“</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># deploy èº«ä»½æ‰§è¡Œï¼Œå®‰è£… PostgreSQL</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deploy@VM-0-13-ubuntu:~$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgresql</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgresql-contrib</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[sudo] password </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> deploy:  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å…¥ deploy ç”¨æˆ·çš„å¯†ç ä»¥éªŒè¯èº«ä»½</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®‰è£… PostgreSQL æˆåŠŸåï¼Œå€Ÿç”¨ postgres ç³»ç»Ÿç”¨æˆ·èº«ä»½ä¸€æ¬¡æ€§æ‰§è¡Œæ“ä½œï¼Œåˆ›å»ºä¸“ç”¨æ•°æ®åº“å’Œç”¨æˆ·</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgres</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> psql</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åœ¨ PostgreSQL æ•°æ®åº“ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ã€å—æ§çš„ç¯å¢ƒï¼Œè®©ä½ çš„åº”ç”¨ç¨‹åºå¯ä»¥å®‰å…¨åœ°è¿æ¥å’Œæ“ä½œæ•°æ®ï¼Œè€Œä¸å½±å“å…¶ä»–æ•°æ®åº“æˆ–ä½¿ç”¨æƒé™è¿‡é«˜</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># çš„è´¦æˆ·ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åœ¨ psql äº¤äº’ç•Œé¢æ‰§è¡Œä»¥ä¸‹ SQLï¼š- è®°å¾—æ¢æ‰ your_strong_password_here</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å‘½ä»¤è§£æï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®åº“ç”¨æˆ· myappï¼Œç”¨äºè¿æ¥å’Œæ“ä½œ myapp_db æ•°æ®åº“ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®åº“ myapp_dbï¼Œå°†å…¶æ‰€æœ‰æƒåˆ†é…ç»™ myapp ç”¨æˆ·ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æˆäºˆ myapp ç”¨æˆ·å¯¹ myapp_db æ•°æ®åº“çš„æ‰€æœ‰æƒé™ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CREATE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> USER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myapp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> WITH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PASSWORD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;your_strong_password_here&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CREATE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DATABASE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myapp_db</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> OWNER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myapp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GRANT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ALL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PRIVILEGES</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ON</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DATABASE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myapp_db</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TO</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myapp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">\\q</span></span></code></pre></div><ul><li>éªŒè¯ PostgreSQL å®‰è£…æˆåŠŸ</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># éªŒè¯è¿æ¥</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deploy@VM-0-13-ubuntu:~$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sudo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgres</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> psql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -U</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myapp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myapp_db</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[sudo] password </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> deploy:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">psql:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> error:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> connection</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> socket</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/var/run/postgresql/.s.PGSQL.5432&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> failed:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> FATAL:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Peer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> authentication</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> failed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;myapp&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¿™ä¸ªé”™è¯¯çš„æ ¸å¿ƒåŸå› æ˜¯ PostgreSQL çš„èº«ä»½éªŒè¯æ–¹å¼ï¼ˆPeer Authenticationï¼‰ å’Œä½ çš„è¿æ¥æ–¹å¼ä¸åŒ¹é…</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Peer authentication æ˜¯ä¸€ç§ç‰¹æ®Šçš„èº«ä»½éªŒè¯æ–¹æ³•ã€‚å®ƒçš„è§„åˆ™æ˜¯ï¼šå½“å‘èµ·è¿æ¥çš„ Linux ç³»ç»Ÿç”¨æˆ·åï¼Œä¸è¦ç™»å½•çš„ PostgreSQL æ•°æ®åº“ç”¨æˆ·åç›¸åŒæ—¶ï¼Œæ‰å…è®¸è¿æ¥ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰§è¡Œæ­¤å‘½ä»¤æ—¶ï¼ŒçœŸæ­£åœ¨è¿è¡Œ psql å‘½ä»¤çš„ Linux ç”¨æˆ·æ˜¯ postgresï¼Œä½ æƒ³ä»¥ PostgreSQL ç”¨æˆ· myapp çš„èº«ä»½ç™»å½•ï¼ŒäºŒè€…åå­—ä¸åŒ¹é…ï¼Œæ‰€ä»¥è¢«æ‹’ç»äº†ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è§£å†³æ–¹æ¡ˆæ˜¯æ¢å¦ä¸€ç§éªŒè¯æ–¹å¼ï¼Œé‡‡ç”¨â€œéªŒè¯å¯†ç â€ï¼ˆmd5 æˆ– scram-sha-256ï¼‰çš„æ–¹å¼ã€‚è¿™æ ·ï¼Œåªè¦å¯†ç æ­£ç¡®ï¼Œä¸ç®¡å“ªä¸ª Linux ç”¨æˆ·å‘èµ·è¿æ¥éƒ½å¯ä»¥ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰¾åˆ° hba_file ï¼Œè¿™æ˜¯ä¸€ä¸ª PostgreSQL é…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­æœ‰å…³äºè®¾ç½®å®¢æˆ·ç«¯è¿æ¥çš„éªŒè¯æ–¹å¼ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deploy@VM-0-13-ubuntu:~$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sudo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgres</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> psql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;SHOW hba_file;&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">              hba_file</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> /etc/postgresql/16/main/pg_hba.conf</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> row</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½¿ç”¨ nano ç¼–è¾‘å™¨æ‰“å¼€ hba_file é…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deploy@VM-0-13-ubuntu:~$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nano</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/postgresql/16/main/pg_hba.conf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰¾åˆ° è¿™ä¸€è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># &quot;local&quot; is for Unix domain socket connections only</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">local</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   all             all                                     peer</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŠŠ peer æ›¿æ¢ä¸º md5</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># &quot;local&quot; is for Unix domain socket connections only</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">local</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   all             all                                     md5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŒ‰ Ctrl+X é€€å‡ºï¼Œä¿å­˜ä¿®æ”¹ï¼ˆç¡®è®¤ä¿å­˜æ—¶æŒ‰ Yï¼‰</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deploy@VM-0-13-ubuntu:~$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sudo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgres</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> psql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -U</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myapp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myapp_db</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[sudo] password </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> deploy:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Password</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myapp:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">psql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (16.11 (Ubuntu </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">16.11-0ubuntu0.24.04.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;help&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> help.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">myapp_db</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">onninfo</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">You</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> are</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> connected</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> database</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;myapp_db&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> as</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;myapp&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> via</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> socket</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/var/run/postgresql&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> port</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;5432&quot;.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">myapp_db</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span></span></code></pre></div><ul><li>æƒ³è¦åˆ é™¤ myapp ç”¨æˆ·å’Œ myapp_db åº“ - å› ä¸ºå¿˜è®°äº†å¯†ç ï¼Œä¸”æ•°æ®åº“æ˜¯ç©ºçš„</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä»¥ deploy ç”¨æˆ·èº«ä»½ç™»å½•ç³»ç»Ÿæ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deploy@VM-0-13-ubuntu:~$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sudo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgres</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> psql</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[sudo] password </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> deploy:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">psql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (16.11 (Ubuntu </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">16.11-0ubuntu0.24.04.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;help&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> help.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">postgres</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">#</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ­¤æ—¶å·²ç»è¿›å…¥äº† PostgreSQL çš„è¶…çº§ç”¨æˆ·ï¼ˆpostgresï¼‰äº¤äº’ç»ˆç«¯</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ é™¤æ•°æ®åº“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">postgres</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># DROP DATABASE IF EXISTS myapp_db;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DROP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DATABASE</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ é™¤ç”¨æˆ·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">postgres</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># DROP USER IF EXISTS myapp;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DROP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ROLE</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºæ–°ç”¨æˆ·ï¼Œè®¾ç½®ä½ è®°å¾—ä½çš„å¯†ç ï¼ˆæ›¿æ¢ &#39;your_new_password&#39;ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">postgres</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># CREATE USER myapp WITH PASSWORD </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;your_new_password&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CREATE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ROLE</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºæ•°æ®åº“ï¼Œå¹¶æŒ‡å®š myapp ä¸ºæ‰€æœ‰è€…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">postgres</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># CREATE DATABASE myapp_db OWNER myapp;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CREATE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DATABASE</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># éªŒè¯ç”¨æˆ·æ˜¯å¦å­˜åœ¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">postgres</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">u myapp</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     List</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> roles</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Role</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Attributes</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-----------+------------</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> myapp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">     |</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># éªŒè¯æ•°æ®åº“æ˜¯å¦å­˜åœ¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">postgres</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\l</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> myapp_db</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                                                   List</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> databases</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   Name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Owner</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Encoding</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Locale</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Provider</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   Collate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Ctype</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ICU</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Locale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ICU</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Rules</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Access</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> privileges</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">----------+-------+----------+-----------------+-------------+-------------+------------+-----------+-------------------</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> myapp_db</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> myapp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UTF8</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">     |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> libc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> en_US.UTF-8</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> en_US.UTF-8</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           |</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> row</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºä¸€ä¸ªæµ‹è¯•è¡¨ myapp_db ï¼Œå±äº myapp ç”¨æˆ·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">postgres</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># CREATE TABLE users (</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SERIAL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PRIMARY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> KEY,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">NOT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NULL,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    email</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">UNIQUE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CREATE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TABLE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">postgres</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># INSERT INTO users (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">name,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> email</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) VALUES</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&#39;Alice&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;alice@example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&#39;Bob&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;bob@example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&#39;Charlie&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;charlie@example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">INSERT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># éªŒè¯æµ‹è¯•è¡¨æ˜¯å¦å­˜åœ¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">postgres</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># SELECT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FROM users;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        email</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">----+---------+---------------------</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Alice</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> alice@example.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Bob</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">     |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bob@example.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  3</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Charlie</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> charlie@example.com</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rows</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é€€å‡º psql äº¤äº’ç»ˆç«¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">postgres</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\q</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deploy@VM-0-13-ubuntu:~$</span></span></code></pre></div><h3 id="å¼€æ”¾ç«¯å£ä¾›å¼€å‘æœºè¿æ¥æ•°æ®åº“" tabindex="-1">å¼€æ”¾ç«¯å£ä¾›å¼€å‘æœºè¿æ¥æ•°æ®åº“ <a class="header-anchor" href="#å¼€æ”¾ç«¯å£ä¾›å¼€å‘æœºè¿æ¥æ•°æ®åº“" aria-label="Permalink to &quot;å¼€æ”¾ç«¯å£ä¾›å¼€å‘æœºè¿æ¥æ•°æ®åº“&quot;">â€‹</a></h3><ul><li>è¦è®©ä½ <strong>æœ¬åœ° Windows ä¸Šçš„ DBeaverï¼ˆæˆ–å…¶ä»– PostgreSQL å®¢æˆ·ç«¯ï¼‰æˆåŠŸè¿æ¥è…¾è®¯äº‘ä¸Šçš„ PostgreSQL æœåŠ¡</strong>ï¼Œä½ éœ€è¦å®Œæˆ <strong>3 ä¸ªå…³é”®é…ç½®</strong>ã€‚ç¼ºä¸€ä¸å¯ã€‚</li></ul><h4 id="ç¬¬-1-æ­¥-ä¿®æ”¹-postgresql-é…ç½®-å…è®¸è¿œç¨‹è¿æ¥" tabindex="-1">ç¬¬ 1 æ­¥ï¼šä¿®æ”¹ PostgreSQL é…ç½®ï¼Œå…è®¸è¿œç¨‹è¿æ¥ <a class="header-anchor" href="#ç¬¬-1-æ­¥-ä¿®æ”¹-postgresql-é…ç½®-å…è®¸è¿œç¨‹è¿æ¥" aria-label="Permalink to &quot;ç¬¬ 1 æ­¥ï¼šä¿®æ”¹ PostgreSQL é…ç½®ï¼Œå…è®¸è¿œç¨‹è¿æ¥&quot;">â€‹</a></h4><h5 id="ç¼–è¾‘-postgresql-conf" tabindex="-1">ç¼–è¾‘ <code>postgresql.conf</code> <a class="header-anchor" href="#ç¼–è¾‘-postgresql-conf" aria-label="Permalink to &quot;ç¼–è¾‘ \`postgresql.conf\`&quot;">â€‹</a></h5><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nano</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/postgresql/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/main/postgresql.conf</span></span></code></pre></div><p>æ‰¾åˆ°è¿™ä¸€è¡Œï¼ˆé€šå¸¸åœ¨ <code>CONNECTIONS AND AUTHENTICATION</code> åŒºåŸŸï¼‰ï¼š</p><div class="language-conf vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">conf</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>#listen_addresses = &#39;localhost&#39;</span></span></code></pre></div><p>â†’ <strong>å–æ¶ˆæ³¨é‡Šå¹¶æ”¹ä¸º</strong>ï¼š</p><div class="language-conf vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">conf</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>listen_addresses = &#39;*&#39;</span></span></code></pre></div><blockquote><p>è¡¨ç¤ºç›‘å¬æ‰€æœ‰ IPï¼ˆåŒ…æ‹¬å…¬ç½‘ï¼‰</p></blockquote><p>ä¿å­˜é€€å‡ºï¼ˆ<code>Ctrl+O</code> â†’ å›è½¦ â†’ <code>Ctrl+X</code>ï¼‰ã€‚</p><hr><h5 id="ç¼–è¾‘-pg-hba-conf-å®¢æˆ·ç«¯è®¤è¯é…ç½®" tabindex="-1">ç¼–è¾‘ <code>pg_hba.conf</code>ï¼ˆå®¢æˆ·ç«¯è®¤è¯é…ç½®ï¼‰ <a class="header-anchor" href="#ç¼–è¾‘-pg-hba-conf-å®¢æˆ·ç«¯è®¤è¯é…ç½®" aria-label="Permalink to &quot;ç¼–è¾‘ \`pg_hba.conf\`ï¼ˆå®¢æˆ·ç«¯è®¤è¯é…ç½®ï¼‰&quot;">â€‹</a></h5><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nano</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/postgresql/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/main/pg_hba.conf</span></span></code></pre></div><p>åœ¨æ–‡ä»¶<strong>æœ«å°¾</strong>æ·»åŠ ä¸€è¡Œï¼Œå…è®¸ä½ çš„ç”¨æˆ·ä»ä»»æ„ IP ç”¨å¯†ç ç™»å½•ï¼š</p><div class="language-conf vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">conf</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># TYPE  DATABASE    USER    ADDRESS     METHOD</span></span>
<span class="line"><span>host    myapp_db    myapp   0.0.0.0/0   md5</span></span></code></pre></div><blockquote><p>ğŸ”’ <strong>å®‰å…¨å»ºè®®</strong>ï¼šä¸Šçº¿ååº”å°† <code>0.0.0.0/0</code> æ›¿æ¢ä¸ºä½ æœ¬æœºçš„å…¬ç½‘ IPï¼ˆå¦‚ <code>123.123.123.123/32</code>ï¼‰ã€‚<br> å¯é€šè¿‡è®¿é—® <a href="https://ip.cn" target="_blank" rel="noreferrer">https://ip.cn</a> æŸ¥çœ‹ä½ çš„æœ¬åœ°å…¬ç½‘ IPã€‚</p></blockquote><p>ä¿å­˜é€€å‡ºã€‚</p><hr><h5 id="é‡å¯-postgresql-æœåŠ¡" tabindex="-1">é‡å¯ PostgreSQL æœåŠ¡ <a class="header-anchor" href="#é‡å¯-postgresql-æœåŠ¡" aria-label="Permalink to &quot;é‡å¯ PostgreSQL æœåŠ¡&quot;">â€‹</a></h5><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgresql</span></span></code></pre></div><hr><h4 id="ç¬¬-2-æ­¥-é…ç½®è…¾è®¯äº‘å®‰å…¨ç»„-é˜²ç«å¢™" tabindex="-1">ç¬¬ 2 æ­¥ï¼šé…ç½®è…¾è®¯äº‘<strong>å®‰å…¨ç»„ï¼ˆé˜²ç«å¢™ï¼‰</strong> <a class="header-anchor" href="#ç¬¬-2-æ­¥-é…ç½®è…¾è®¯äº‘å®‰å…¨ç»„-é˜²ç«å¢™" aria-label="Permalink to &quot;ç¬¬ 2 æ­¥ï¼šé…ç½®è…¾è®¯äº‘**å®‰å…¨ç»„ï¼ˆé˜²ç«å¢™ï¼‰**&quot;">â€‹</a></h4><ol><li>ç™»å½• <a href="https://console.cloud.tencent.com/" target="_blank" rel="noreferrer">è…¾è®¯äº‘æ§åˆ¶å°</a></li><li>è¿›å…¥ <strong>äº‘æœåŠ¡å™¨ &gt; è½»é‡åº”ç”¨æœåŠ¡å™¨</strong></li><li>æ‰¾åˆ°ä½ çš„æœåŠ¡å™¨å®ä¾‹ â†’ ç‚¹å‡» <strong>ã€Œé˜²ç«å¢™ã€</strong>ï¼ˆæˆ–ã€Œå®‰å…¨ç»„ã€ï¼‰</li><li>æ·»åŠ  <strong>å…¥ç«™è§„åˆ™ï¼ˆæ”¾è¡Œç«¯å£ï¼‰</strong>ï¼š</li></ol><table tabindex="0"><thead><tr><th>åè®®</th><th>ç«¯å£</th><th>æº IP</th><th>ç­–ç•¥</th></tr></thead><tbody><tr><td>TCP</td><td>5432</td><td>ä½ çš„æœ¬åœ°å…¬ç½‘ IPï¼ˆæˆ– <code>0.0.0.0/0</code> ä¸´æ—¶æµ‹è¯•ï¼‰</td><td>å…è®¸</td></tr></tbody></table><blockquote><p>ğŸŒ ç¤ºä¾‹ï¼š</p><ul><li>ä¸´æ—¶æµ‹è¯•ï¼šæº IP å¡« <code>0.0.0.0/0</code></li><li>å®‰å…¨åšæ³•ï¼šå¡« <code>123.123.123.123/32</code>ï¼ˆæ›¿æ¢ä¸ºä½ çš„å®é™… IPï¼‰</li></ul></blockquote><p><img src="`+t+'" alt="é˜²ç«å¢™è®¾ç½®"></p><hr><h4 id="ç¬¬-3-æ­¥-æœ¬åœ°-dbeaver-è¿æ¥æµ‹è¯•" tabindex="-1">ç¬¬ 3 æ­¥ï¼šæœ¬åœ° DBeaver è¿æ¥æµ‹è¯• <a class="header-anchor" href="#ç¬¬-3-æ­¥-æœ¬åœ°-dbeaver-è¿æ¥æµ‹è¯•" aria-label="Permalink to &quot;ç¬¬ 3 æ­¥ï¼šæœ¬åœ° DBeaver è¿æ¥æµ‹è¯•&quot;">â€‹</a></h4><p>åœ¨ DBeaver ä¸­æ–°å»º PostgreSQL è¿æ¥ï¼Œå¡«å†™ï¼š</p><table tabindex="0"><thead><tr><th>å­—æ®µ</th><th>å€¼</th></tr></thead><tbody><tr><td>Host</td><td>è…¾è®¯äº‘æœåŠ¡å™¨çš„<strong>å…¬ç½‘ IP</strong>ï¼ˆä¸æ˜¯å†…ç½‘ IPï¼‰</td></tr><tr><td>Port</td><td><code>5432</code></td></tr><tr><td>Database</td><td><code>myapp_db</code></td></tr><tr><td>Username</td><td><code>myapp</code></td></tr><tr><td>Password</td><td>ä½ è®¾ç½®çš„å¯†ç </td></tr></tbody></table><p>ç‚¹å‡» <strong>ã€ŒTest Connectionã€</strong>ï¼ŒæˆåŠŸåˆ™æ˜¾ç¤º <strong>â€œConnectedâ€</strong>ã€‚</p><p><img src="'+k+'" alt="DBeaver åˆ›å»º PostgreSQL è¿æ¥"></p><p><img src="'+e+'" alt="DBeaver ä¸‹è½½ PostgreSQL é©±åŠ¨"></p>',60)])])}const u=i(r,[["render",d]]);export{C as __pageData,u as default};
