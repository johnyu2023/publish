import{_ as e,c as i,o as a,a1 as t}from"./chunks/framework.6sy4tsQT.js";const n="/publish/assets/foundation/jupyter02/jupyter-architecture.png",c=JSON.parse('{"title":"Jupyter Kernel","description":"文章介绍了Jupyter生态系统，重点阐述了Jupyter Kernel作为执行引擎的架构和功能。涵盖Kernel与前端的通信机制、为特定Python环境注册Kernel的方法、虚拟环境管理，以及Restart Kernel的重要性。","frontmatter":{"title":"Jupyter Kernel","description":"文章介绍了Jupyter生态系统，重点阐述了Jupyter Kernel作为执行引擎的架构和功能。涵盖Kernel与前端的通信机制、为特定Python环境注册Kernel的方法、虚拟环境管理，以及Restart Kernel的重要性。","date":"2025-10-24T00:00:00.000Z","tags":["Jupyter","JupyterLab","Kernel"]},"headers":[],"relativePath":"foundation/jupyter-kernel.md","filePath":"foundation/jupyter-kernel.md"}'),l={name:"foundation/jupyter-kernel.md"};function r(p,s,h,o,k,d){return a(),i("div",null,[...s[0]||(s[0]=[t('<h2 id="jupyter-和-jupyterlab" tabindex="-1">Jupyter 和 JupyterLab <a class="header-anchor" href="#jupyter-和-jupyterlab" aria-label="Permalink to &quot;Jupyter 和 JupyterLab&quot;">​</a></h2><blockquote><p><strong>Jupyter 是一个项目生态，JupyterLab 是这个生态中用于交互式开发的主力前端应用之一。</strong></p></blockquote><h3 id="jupyter-是一个项目生态系统" tabindex="-1"><strong>Jupyter 是一个项目生态系统</strong> <a class="header-anchor" href="#jupyter-是一个项目生态系统" aria-label="Permalink to &quot;**Jupyter 是一个项目生态系统**&quot;">​</a></h3><ul><li>“Jupyter” 是一个<strong>开源项目家族</strong>的总称，目标是支持交互式计算。</li><li>它包含多个子项目，例如： <ul><li><strong>Jupyter Notebook</strong>（经典的 <code>.ipynb</code> 网页界面）</li><li><strong>JupyterLab</strong>（新一代模块化集成开发环境）</li><li><strong>Jupyter Kernel</strong>（执行代码的核心引擎，如 IPython kernel）</li><li><strong>Jupyter Server</strong>（提供后端服务）</li><li><strong>JupyterHub</strong>（多用户 Notebook 服务）</li><li><strong>Voilà</strong>（将 Notebook 转为仪表盘）</li><li><strong>Jupyter Book</strong>（生成静态文档）</li></ul></li></ul><h3 id="jupyterlab-是-jupyter-生态中的一个具体应用" tabindex="-1"><strong>JupyterLab 是 Jupyter 生态中的一个具体应用</strong> <a class="header-anchor" href="#jupyterlab-是-jupyter-生态中的一个具体应用" aria-label="Permalink to &quot;**JupyterLab 是 Jupyter 生态中的一个具体应用**&quot;">​</a></h3><ul><li>它是 Jupyter 官方推出的<strong>下一代交互式开发环境</strong>，用来替代传统的 Jupyter Notebook。</li><li>特点： <ul><li>支持多标签页、拖拽布局</li><li>集成 Notebook、文本编辑器、终端、数据查看器等</li><li>基于插件架构，可扩展性强</li><li>仍然依赖 Jupyter Kernel 来执行代码</li></ul></li></ul><h2 id="jupyter-架构" tabindex="-1">Jupyter 架构 <a class="header-anchor" href="#jupyter-架构" aria-label="Permalink to &quot;Jupyter 架构&quot;">​</a></h2><ul><li>JupyterLab 属于 Client 层</li><li>ipykernel 是 Python 语言对应的 Jupyter Kernel 实现，它是整个 Jupyter 架构中负责执行 Python 代码的核心组件</li></ul><img src="'+n+`" alt="Jupyter 架构"><h2 id="jupyter-kernel-介绍" tabindex="-1">Jupyter Kernel 介绍 <a class="header-anchor" href="#jupyter-kernel-介绍" aria-label="Permalink to &quot;Jupyter Kernel 介绍&quot;">​</a></h2><blockquote><p><strong>Jupyter Kernel 是一个支持交互式计算的智能执行引擎，它通过标准化的消息协议与前端解耦，既能运行代码，又能提供补全、调试、输入等高级功能。</strong></p></blockquote><h3 id="_1-kernel-是一个独立的后台进程" tabindex="-1">1. <strong>Kernel 是一个独立的后台进程</strong> <a class="header-anchor" href="#_1-kernel-是一个独立的后台进程" aria-label="Permalink to &quot;1. **Kernel 是一个独立的后台进程**&quot;">​</a></h3><ul><li>它通常是一个 Unix 进程（比如 Python 的 <code>ipykernel</code>）。</li><li>负责接收你从 Notebook 或 JupyterLab 输入的代码，执行它，并把结果（输出、错误、图表等）返回给你。</li></ul><h3 id="_2-它支持多种交互功能" tabindex="-1">2. <strong>它支持多种交互功能</strong> <a class="header-anchor" href="#_2-它支持多种交互功能" aria-label="Permalink to &quot;2. **它支持多种交互功能**&quot;">​</a></h3><p>Kernel 不只是“运行代码”，还提供：</p><ul><li>代码自动补全（completion）</li><li>代码内省（比如查看函数签名、文档）</li><li>调试（debugging）</li><li>中断长时间运行的任务</li><li>执行历史记录</li><li>处理用户输入（如 <code>input()</code>）</li></ul><blockquote><p>注意：不是所有语言的 Kernel 都支持全部功能（比如 R 的 Kernel 不支持中断）。</p></blockquote><h3 id="_3-通过-zeromq-zmq-与前端通信" tabindex="-1">3. <strong>通过 ZeroMQ（ZMQ）与前端通信</strong> <a class="header-anchor" href="#_3-通过-zeromq-zmq-与前端通信" aria-label="Permalink to &quot;3. **通过 ZeroMQ（ZMQ）与前端通信**&quot;">​</a></h3><p>Kernel 通过 <strong>5 个异步通信通道</strong>（基于 ZMQ）与 Jupyter 前端交互：</p><ul><li><strong>shell</strong>：主通道，处理执行、补全、检查等请求（REQ/REP）</li><li><strong>iopub</strong>：广播输出、状态变化（PUB/SUB）</li><li><strong>control</strong>：高优先级系统命令，如中断、调试控制（REQ/REP）</li><li><strong>stdin</strong>：处理 <code>input()</code> 等用户输入（REQ/REP）</li><li><strong>heartbeat</strong>：健康检测（ping/pong）</li></ul><p>这种设计让关键操作（如中断）不会被普通代码执行阻塞。</p><h3 id="_4-代码执行不是-直接运行" tabindex="-1">4. <strong>代码执行不是“直接运行”</strong> <a class="header-anchor" href="#_4-代码执行不是-直接运行" aria-label="Permalink to &quot;4. **代码执行不是“直接运行”**&quot;">​</a></h3><p>当你在单元格中输入 <code>print(&quot;hello&quot;)</code>，Kernel 会：</p><ol><li>先对代码做预处理（比如把 <code>%time</code> 转成 <code>get_ipython().run_line_magic(...)</code>）</li><li>编译为 AST（可选转换）</li><li>在一个隔离的 <strong>用户命名空间</strong>（user namespace）中用 <code>exec()</code> 执行</li><li>把输出通过 iopub 发回前端，最后返回执行状态（<code>execute_reply</code>）</li></ol><h3 id="_5-调试和输入也是-虚拟化-的" tabindex="-1">5. <strong>调试和输入也是“虚拟化”的</strong> <a class="header-anchor" href="#_5-调试和输入也是-虚拟化-的" aria-label="Permalink to &quot;5. **调试和输入也是“虚拟化”的**&quot;">​</a></h3><ul><li>调试时，Kernel 会把单元格代码写入临时文件，再用 <code>debugpy</code>（基于 Microsoft DAP 协议）进行断点调试。</li><li><code>input()</code> 被替换成向 <strong>stdin 通道</strong> 发送请求，实现“虚拟键盘”。</li></ul><h2 id="为特定-python-环境注册-kernel" tabindex="-1">为特定 Python 环境注册 Kernel <a class="header-anchor" href="#为特定-python-环境注册-kernel" aria-label="Permalink to &quot;为特定 Python 环境注册 Kernel&quot;">​</a></h2><blockquote><p><strong>为特定 Python 环境注册 Kernel = 告诉 Jupyter：“当我选择这个 Kernel 时，请用这个 Python 解释器来运行代码。”</strong></p></blockquote><ul><li><strong>将某个 Python 解释器（通常来自虚拟环境或 pyenv 管理的版本）作为 Jupyter 可选的执行内核（Kernel）</strong>，这样你就可以在 JupyterLab 或 Jupyter Notebook 中选择并使用该环境中的 Python 及其安装的包。</li></ul><h3 id="_1-前提条件" tabindex="-1">1. <strong>前提条件</strong> <a class="header-anchor" href="#_1-前提条件" aria-label="Permalink to &quot;1. **前提条件**&quot;">​</a></h3><ul><li>你已经有一个 <strong>独立的 Python 环境</strong>（例如通过 <code>pyenv</code>、<code>venv</code>、<code>conda</code> 创建的）。</li><li>该环境中已安装 <strong><code>ipykernel</code></strong> 包（它是 Jupyter Kernel 的 Python 实现）。</li></ul><h3 id="_2-安装-ipykernel-到目标环境中" tabindex="-1">2. <strong>安装 <code>ipykernel</code> 到目标环境中</strong> <a class="header-anchor" href="#_2-安装-ipykernel-到目标环境中" aria-label="Permalink to &quot;2. **安装 \`ipykernel\` 到目标环境中**&quot;">​</a></h3><h3 id="_3-注册-kernel-关键步骤" tabindex="-1">3. <strong>注册 Kernel（关键步骤）</strong> <a class="header-anchor" href="#_3-注册-kernel-关键步骤" aria-label="Permalink to &quot;3. **注册 Kernel（关键步骤）**&quot;">​</a></h3><p>运行以下命令来注册一个新的 Kernel：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ipykernel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --user</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-py3135</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --display-name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Python 3.13.5 (my project)&quot;</span></span></code></pre></div><h4 id="参数说明" tabindex="-1">参数说明 <a class="header-anchor" href="#参数说明" aria-label="Permalink to &quot;参数说明&quot;">​</a></h4><table tabindex="0"><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td><code>--user</code></td><td>将 Kernel 安装到当前用户的配置目录（<code>~/.local/share/jupyter/kernels/</code>），无需 root 权限</td></tr><tr><td><code>--name my-py3135</code></td><td><strong>内部标识名</strong>（文件夹名），必须唯一，不能有空格或特殊字符</td></tr><tr><td><code>--display-name &quot;...&quot;</code></td><td><strong>在 JupyterLab/Notebook 界面中显示的名称</strong>，可含空格和描述</td></tr></tbody></table><blockquote><p>✅ 注册后，会在 <code>~/.local/share/jupyter/kernels/my-py3135/</code> 下生成一个 <code>kernel.json</code> 文件。</p></blockquote><hr><h3 id="📄-4-kernel-json-文件内容示例" tabindex="-1">📄 4. <strong><code>kernel.json</code> 文件内容示例</strong> <a class="header-anchor" href="#📄-4-kernel-json-文件内容示例" aria-label="Permalink to &quot;📄 4. **\`kernel.json\` 文件内容示例**&quot;">​</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> &quot;argv&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;D:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2024-code</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ai-lesson</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">14-16-LangChain</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CASE-LangChain</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\u4f7f\\u7528\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">venv</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Scripts</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">python.exe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;-Xfrozen_modules=off&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;-m&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;ipykernel_launcher&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;-f&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;{connection_file}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> &quot;display_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Project: CASE-LangChain</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\u4f7f\\u7528</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> &quot;language&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;python&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> &quot;metadata&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;debugger&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li><code>argv[0]</code> 是<strong>该 Kernel 启动时实际调用的 Python 解释器路径</strong>。</li><li>这确保了 Jupyter 启动 Kernel 时，使用的是你指定的 Python 环境。</li><li>所有 <code>import</code> 都会从该环境的 <code>site-packages</code> 中加载。</li></ul><h3 id="_5-在-jupyterlab-中使用" tabindex="-1">5. <strong>在 JupyterLab 中使用</strong> <a class="header-anchor" href="#_5-在-jupyterlab-中使用" aria-label="Permalink to &quot;5. **在 JupyterLab 中使用**&quot;">​</a></h3><ol><li>启动 JupyterLab（可以从任意环境启动，不影响 Kernel 选择）：</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   jupyter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lab</span></span></code></pre></div><ol><li>新建 Notebook 或打开现有 Notebook。</li><li>点击右上角的 Kernel 名称（如 “Python 3”），选择你注册的 <strong>“Python 3.13.5 (my project)”</strong>。</li><li>此时 Notebook 就运行在你指定的 Python 3.13.5 环境中！</li></ol><h3 id="_6-管理已注册的-kernels" tabindex="-1">6. <strong>管理已注册的 Kernels</strong> <a class="header-anchor" href="#_6-管理已注册的-kernels" aria-label="Permalink to &quot;6. **管理已注册的 Kernels**&quot;">​</a></h3><ul><li><strong>查看所有已注册 Kernel</strong>：</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  jupyter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kernelspec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list</span></span></code></pre></div><ul><li><strong>删除某个 Kernel</strong>（例如 <code>my-py3135</code>）：</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  jupyter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kernelspec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> uninstall</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-py3135</span></span></code></pre></div><h2 id="restart-kernel" tabindex="-1">Restart Kernel <a class="header-anchor" href="#restart-kernel" aria-label="Permalink to &quot;Restart Kernel&quot;">​</a></h2><h3 id="概念解析" tabindex="-1">概念解析 <a class="header-anchor" href="#概念解析" aria-label="Permalink to &quot;概念解析&quot;">​</a></h3><h4 id="_1-jupyter-的-内核-kernel-是什么" tabindex="-1">1. <strong>Jupyter 的“内核”（Kernel）是什么？</strong> <a class="header-anchor" href="#_1-jupyter-的-内核-kernel-是什么" aria-label="Permalink to &quot;1. **Jupyter 的“内核”（Kernel）是什么？**&quot;">​</a></h4><ul><li>内核是一个<strong>独立的后台进程</strong>（比如 Python 解释器），负责<strong>真正执行你的代码</strong>。</li><li>当你在单元格里写 <code>x = 5</code> 并运行，这个变量 <code>x</code> 是<strong>保存在内核的内存中</strong>，不是保存在 <code>.ipynb</code> 文件里。</li><li>即使你关闭浏览器标签页，只要内核没停，<code>x</code> 依然存在（下次打开还能用）。</li></ul><h4 id="_2-为什么需要-restart-kernel" tabindex="-1">2. <strong>为什么需要 “Restart Kernel”？</strong> <a class="header-anchor" href="#_2-为什么需要-restart-kernel" aria-label="Permalink to &quot;2. **为什么需要 “Restart Kernel”？**&quot;">​</a></h4><p>在交互式开发中，你可能会：</p><ul><li>修改了某个函数定义，但旧版本还在内存中；</li><li>误删了某个变量，但后续单元格还依赖它；</li><li>数据库连接没关，占着资源；</li><li>代码逻辑变了，但旧状态干扰新结果。</li></ul><p>👉 这些<strong>残留状态会导致“明明代码改对了，结果还是错的”</strong>。</p><p>所以你需要：</p><ul><li><strong>Restart Kernel</strong>：杀死旧的 Python 进程，启动一个全新的、干净的内核（所有变量清空）；</li><li><strong>Run All</strong>：从上到下重新执行所有单元格，确保逻辑完整、状态一致。</li></ul><blockquote><p>🔄 “刷新页面” ≠ “Restart Kernel”<br> 刷新浏览器只是重新加载网页，<strong>内核仍在后台运行</strong>！你必须手动点 “Restart Kernel” 才能重置 Python 状态。</p></blockquote><hr><h3 id="类比理解" tabindex="-1">类比理解 <a class="header-anchor" href="#类比理解" aria-label="Permalink to &quot;类比理解&quot;">​</a></h3><table tabindex="0"><thead><tr><th>场景</th><th>类比</th></tr></thead><tbody><tr><td><strong>Jupyter 内核</strong></td><td>一个开着的 Python REPL（交互式命令行）</td></tr><tr><td><strong>运行单元格</strong></td><td>在 REPL 里输入一行代码并回车</td></tr><tr><td><strong>Restart Kernel</strong></td><td>按 <code>Ctrl+D</code> 退出 REPL，再重新打开一个新的</td></tr><tr><td><strong>.ipynb 文件</strong></td><td>一个记录你“曾经在 REPL 里输过什么”的笔记</td></tr></tbody></table><p>即使你修改了笔记（<code>.ipynb</code> 文件），<strong>REPL 里的状态不会自动变</strong>——你得重新输入所有命令（Run All），或者干脆重启 REPL（Restart Kernel）。</p><hr><h3 id="常见误区澄清" tabindex="-1">常见误区澄清 <a class="header-anchor" href="#常见误区澄清" aria-label="Permalink to &quot;常见误区澄清&quot;">​</a></h3><ul><li><p>❌ “我改了代码，刷新页面就应该生效”<br> → 刷新页面只重载前端，<strong>内核状态不变</strong>。</p></li><li><p>✅ 正确做法：<br><strong>Kernel → Restart &amp; Run All</strong><br> 这样才能确保：</p><ol><li>所有旧状态清除；</li><li>所有单元格按顺序重新执行；</li><li>结果可复现。</li></ol></li></ul><hr><h3 id="为什么叫-kernel-而不叫-python-interpreter" tabindex="-1">为什么叫 “Kernel” 而不叫 “Python Interpreter”？ <a class="header-anchor" href="#为什么叫-kernel-而不叫-python-interpreter" aria-label="Permalink to &quot;为什么叫 “Kernel” 而不叫 “Python Interpreter”？&quot;">​</a></h3><p>因为 Jupyter 支持多种语言（R、Julia、Scala 等），每种语言都有自己的“内核”。<br> “Kernel” 是 Jupyter 对<strong>后端计算引擎</strong>的通用称呼，Python 内核只是其中一种。</p><h2 id="jupyterlab-和-虚拟环境" tabindex="-1">JupyterLab 和 虚拟环境 <a class="header-anchor" href="#jupyterlab-和-虚拟环境" aria-label="Permalink to &quot;JupyterLab 和 虚拟环境&quot;">​</a></h2><h3 id="虚拟环境" tabindex="-1">虚拟环境 <a class="header-anchor" href="#虚拟环境" aria-label="Permalink to &quot;虚拟环境&quot;">​</a></h3><ul><li>每个项目都应该建立自己的虚拟环境，可以避免<code>依赖地狱</code></li><li>jupyter lab 中可以选择不同的 kernel，每个 kernel 对应一个虚拟环境</li></ul><h3 id="在一个项目中创建虚拟环境" tabindex="-1">在一个项目中创建虚拟环境 <a class="header-anchor" href="#在一个项目中创建虚拟环境" aria-label="Permalink to &quot;在一个项目中创建虚拟环境&quot;">​</a></h3><p>在你的项目目录下（当前已激活或未激活都可以）：</p><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. 重新创建虚拟环境</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">python </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m venv venv</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. 激活它</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.\\venv\\Scripts\\Activate.ps1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. 升级 pip（可选但推荐）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">python </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m pip install </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">upgrade pip</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. 重新安装依赖（如果你有 requirements.txt）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pip install </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r requirements.txt</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 或者只安装你需要的包，比如：</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pip install jupyterlab langchain openai python</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dotenv</span></span></code></pre></div><h3 id="在项目虚拟环境中启动-jupyterlab" tabindex="-1">在项目虚拟环境中启动 JupyterLab <a class="header-anchor" href="#在项目虚拟环境中启动-jupyterlab" aria-label="Permalink to &quot;在项目虚拟环境中启动 JupyterLab&quot;">​</a></h3><ul><li>在项目目录下打开终端 powershell</li></ul><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 激活项目虚拟环境</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.\\venv\\Scripts\\Activate.ps1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 虚拟环境中启动 jupyter lab</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 确保你已在项目虚拟环境中激活（可以在命令行前看到 \`(venv)\` 字样）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(venv) PS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> python </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m jupyterlab</span></span></code></pre></div><h3 id="在项目虚拟环境中安装其他依赖库" tabindex="-1">在项目虚拟环境中安装其他依赖库 <a class="header-anchor" href="#在项目虚拟环境中安装其他依赖库" aria-label="Permalink to &quot;在项目虚拟环境中安装其他依赖库&quot;">​</a></h3><ul><li>如果发现有新的库要安装，之前的 powershell 窗口是无法接受命令输入的，因为 jupyter lab 已经启动了</li><li>你需要重新打开一个 powershell 窗口，激活项目虚拟环境，然后安装新的库。</li></ul><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.\\venv\\Scripts\\Activate.ps1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 虚拟环境中安装 dashscope langchain-community</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(venv) PS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pip install dashscope langchain</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">community</span></span></code></pre></div><ul><li>由于 jupyter lab 是在同一个虚拟环境中启动的，所以在另一个窗口安装完依赖库后， jupyter lab 中下一次执行片段时，会使用新安装的库。</li></ul>`,85)])])}const g=e(l,[["render",r]]);export{c as __pageData,g as default};
