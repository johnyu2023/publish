import{_ as a,c as i,o as n,a1 as l}from"./chunks/framework.6sy4tsQT.js";const c=JSON.parse('{"title":"Python 的虚拟环境-精简","description":"Python 虚拟环境的使用思考","frontmatter":{"title":"Python 的虚拟环境-精简","description":"Python 虚拟环境的使用思考","date":"2025-12-29T00:00:00.000Z","tags":["Python，虚拟环境"]},"headers":[],"relativePath":"fullstack/python-venv-02.md","filePath":"fullstack/python-venv-02.md"}'),t={name:"fullstack/python-venv-02.md"};function e(h,s,p,k,r,o){return n(),i("div",null,[...s[0]||(s[0]=[l(`<h2 id="python-虚拟环境" tabindex="-1">Python 虚拟环境 <a class="header-anchor" href="#python-虚拟环境" aria-label="Permalink to &quot;Python 虚拟环境&quot;">​</a></h2><blockquote><p><strong>强烈建议在虚拟环境中安装依赖包！</strong> 这是 Python 开发的最佳实践</p></blockquote><h3 id="为什么推荐使用虚拟环境" tabindex="-1">为什么推荐使用虚拟环境？ <a class="header-anchor" href="#为什么推荐使用虚拟环境" aria-label="Permalink to &quot;为什么推荐使用虚拟环境？&quot;">​</a></h3><h4 id="_1-依赖隔离" tabindex="-1">1. <strong>依赖隔离</strong> <a class="header-anchor" href="#_1-依赖隔离" aria-label="Permalink to &quot;1. **依赖隔离**&quot;">​</a></h4><ul><li>每个项目可以有自己独立的包版本</li><li>避免不同项目之间的包版本冲突</li><li>例如：项目A需要 Django 3.2，项目B需要 Django 4.1</li></ul><h4 id="_2-避免污染系统环境" tabindex="-1">2. <strong>避免污染系统环境</strong> <a class="header-anchor" href="#_2-避免污染系统环境" aria-label="Permalink to &quot;2. **避免污染系统环境**&quot;">​</a></h4><ul><li>不会修改系统级别的 Python 包</li><li>防止意外破坏系统工具（很多 Linux 系统工具依赖特定版本的 Python 包）</li></ul><h4 id="_3-便于项目管理" tabindex="-1">3. <strong>便于项目管理</strong> <a class="header-anchor" href="#_3-便于项目管理" aria-label="Permalink to &quot;3. **便于项目管理**&quot;">​</a></h4><ul><li>可以清晰知道每个项目依赖哪些包</li><li>方便生成 <code>requirements.txt</code></li><li>便于团队协作和部署</li></ul><h3 id="如何创建和使用虚拟环境" tabindex="-1">如何创建和使用虚拟环境？ <a class="header-anchor" href="#如何创建和使用虚拟环境" aria-label="Permalink to &quot;如何创建和使用虚拟环境？&quot;">​</a></h3><ul><li>使用内置的 <code>venv</code></li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 示例项目，python 项目目录为 D:\\2025-code\\keepfit\\server</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 进入 python 项目目录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> D:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">025-code</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\k</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">eepfi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> server</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建虚拟环境</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在当前目录下创建一个名为 venv 的目录，它里面放着虚拟环境</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> D:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">025-code</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\k</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">eepfit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">erve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> python</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> venv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> venv</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 激活虚拟环境</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> D:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">025-code</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\k</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">eepfit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">erve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> venv</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">cripts</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ctivate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># (venv) 表示当前终端处于虚拟环境中，这个虚拟环境的名字就叫 venv</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">venv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> D:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">025-code</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\k</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">eepfit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">erve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 现在安装包（会安装到虚拟环境中）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 你的包名</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 退出虚拟环境</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deactivate</span></span></code></pre></div><h3 id="什么时候可以不用虚拟环境" tabindex="-1">什么时候可以不用虚拟环境？ <a class="header-anchor" href="#什么时候可以不用虚拟环境" aria-label="Permalink to &quot;什么时候可以不用虚拟环境？&quot;">​</a></h3><ul><li>临时测试某个包的功能</li><li>安装全局工具（如 <code>black</code>, <code>flake8</code> 等代码格式化/检查工具）</li><li>确定不会与其他项目产生冲突的简单脚本</li></ul><h2 id="python-虚拟环境本质是一个目录" tabindex="-1">Python 虚拟环境本质是一个目录 <a class="header-anchor" href="#python-虚拟环境本质是一个目录" aria-label="Permalink to &quot;Python 虚拟环境本质是一个目录&quot;">​</a></h2><h3 id="虚拟环境的位置" tabindex="-1">虚拟环境的位置 <a class="header-anchor" href="#虚拟环境的位置" aria-label="Permalink to &quot;虚拟环境的位置&quot;">​</a></h3><p><strong>虚拟环境其实是在当前目录下创建的一个文件夹</strong>，不是全局的。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 如果你在 /home/user/myproject 目录下执行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> venv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stock_env</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 那么会创建</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/home/user/myproject/stock_env/</span></span></code></pre></div><ul><li>这个文件夹包含： <ul><li>Python 解释器的副本（或符号链接）</li><li>独立的 <code>site-packages</code> 目录（存放安装的包）</li><li>pip、activate 脚本等工具</li></ul></li></ul><h3 id="不同项目的虚拟环境可以同名吗" tabindex="-1">不同项目的虚拟环境可以同名吗？ <a class="header-anchor" href="#不同项目的虚拟环境可以同名吗" aria-label="Permalink to &quot;不同项目的虚拟环境可以同名吗？&quot;">​</a></h3><p><strong>完全可以！</strong> 因为它们是<strong>不同路径下的不同文件夹</strong>。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 项目1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/home/user/project_a/stock_env/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 项目2  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/home/user/project_b/stock_env/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 这是两个完全独立的虚拟环境，互不影响</span></span></code></pre></div><h3 id="虚拟环境的管理技巧" tabindex="-1">虚拟环境的管理技巧 <a class="header-anchor" href="#虚拟环境的管理技巧" aria-label="Permalink to &quot;虚拟环境的管理技巧&quot;">​</a></h3><h4 id="_1-通常将虚拟环境放在项目根目录" tabindex="-1">1. <strong>通常将虚拟环境放在项目根目录</strong> <a class="header-anchor" href="#_1-通常将虚拟环境放在项目根目录" aria-label="Permalink to &quot;1. **通常将虚拟环境放在项目根目录**&quot;">​</a></h4><div class="language-plaintext vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>my_project/</span></span>
<span class="line"><span>├── stock_env/           # 虚拟环境</span></span>
<span class="line"><span>├── src/</span></span>
<span class="line"><span>├── requirements.txt</span></span>
<span class="line"><span>└── README.md</span></span></code></pre></div><h4 id="_2-记得添加到-gitignore" tabindex="-1">2. <strong>记得添加到 .gitignore</strong> <a class="header-anchor" href="#_2-记得添加到-gitignore" aria-label="Permalink to &quot;2. **记得添加到 .gitignore**&quot;">​</a></h4><div class="language-plaintext vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># .gitignore</span></span>
<span class="line"><span>stock_env/</span></span>
<span class="line"><span>venv/</span></span>
<span class="line"><span>.env/</span></span>
<span class="line"><span>__pycache__/</span></span></code></pre></div><h2 id="虚拟环境激活后无需手动关闭" tabindex="-1">虚拟环境激活后无需手动关闭 <a class="header-anchor" href="#虚拟环境激活后无需手动关闭" aria-label="Permalink to &quot;虚拟环境激活后无需手动关闭&quot;">​</a></h2><blockquote><p><strong>虚拟环境激活后不需要手动终止</strong>。<br> 它只是一个“当前终端用哪个 Python”的开关，不是服务，不占资源。</p></blockquote><p>在 PowerShell（或任何终端）中 <strong>激活虚拟环境</strong>（例如通过 <code>.\\venv\\Scripts\\Activate.ps1</code>）<strong>只是一个临时的 shell 状态变更</strong>，它只影响当前终端会话，不会启动后台进程或服务。</p><h2 id="虚拟环境的空间占用问题" tabindex="-1">虚拟环境的空间占用问题 <a class="header-anchor" href="#虚拟环境的空间占用问题" aria-label="Permalink to &quot;虚拟环境的空间占用问题&quot;">​</a></h2><p><strong>实际情况：</strong></p><ul><li>虚拟环境确实会在每个项目目录下创建独立的依赖库</li><li>但现代 Python 虚拟环境（如 venv、conda）会使用<strong>符号链接</strong>或<strong>硬链接</strong>来减少重复文件</li><li>相同版本的包在不同虚拟环境中通常不会完全复制，而是共享底层文件</li></ul><p><strong>空间占用估算：</strong></p><ul><li>一个基础的虚拟环境大约 10-20MB</li><li>如果项目依赖大型库（如 numpy、pandas、tensorflow），每个环境可能增加 100MB-1GB+</li><li>但如果你有 10 个项目都用相同的依赖，实际占用可能只有 1-2GB，而不是 10GB</li></ul>`,35)])])}const g=a(t,[["render",e]]);export{c as __pageData,g as default};
